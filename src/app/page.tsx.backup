"use client"

import { useState, useEffect, Suspense } from "react"
import { AppStep, ProfileData, SajuData, ChatMessage } from "@/types"
import { FACE_READING_KEYWORDS, SAJU_KEYWORDS, IDEAL_TYPE_KEYWORDS, dummyMatches, dummyAnalysisReport } from "@/constants/data"
import { useSearchParams } from "next/navigation"
import { sajuService } from "@/lib/api/saju"

function FaceReadingAppContent() {
  const searchParams = useSearchParams()
  const [currentStep, setCurrentStep] = useState<AppStep>("onboarding")
  const [uploadedImage, setUploadedImage] = useState<string | null>(null)
  const [additionalPhotos, setAdditionalPhotos] = useState<string[]>([])
  const [isAnalyzing, setIsAnalyzing] = useState(false)
  const [analysisProgress, setAnalysisProgress] = useState(3)
  const [faceReadingResults, setFaceReadingResults] = useState<Array<{ keyword: string; description: string }>>([])
  const [sajuResults, setSajuResults] = useState<Array<{ keyword: string; description: string }>>([])
  const [isSajuAnalyzing, setIsSajuAnalyzing] = useState(false)
  const [sajuProgress, setSajuProgress] = useState(3)

  const [integratedAnalysisStep, setIntegratedAnalysisStep] = useState<"input" | "analyzing" | "result">(
    "input",
  )

  const [profileData, setProfileData] = useState<ProfileData>({
    nickname: "",
    gender: "ë‚¨ì„±", // ê¸°ë³¸ê°’ì„ ë‚¨ì„±ìœ¼ë¡œ ì„¤ì •
    birthDate: "",
    birthTime: "",
    region: "",
    height: "",
    bodyType: "",
    job: "",
    education: "",
    school: "",
    introduction: "",
    idealKeywords: [],
  })
  const [sajuData, setSajuData] = useState<SajuData>({
    birthDate: "",
    birthTime: "",
    birthPlace: "",
    birthPlaceDetail: "",
  })
  const [sajuErrors, setSajuErrors] = useState<Record<string, string>>({})
  const [selectedIdealKeywords, setSelectedIdealKeywords] = useState<string[]>([])
  const [errors, setErrors] = useState<Record<string, string>>({})
  const [showMatches, setShowMatches] = useState(false)

  const [isEditingProfile, setIsEditingProfile] = useState(false)
  const [editProfileData, setEditProfileData] = useState(profileData)

  const [selectedUser, setSelectedUser] = useState<any>(null)

  const [messages, setMessages] = useState<ChatMessage[]>([])
  const [newMessage, setNewMessage] = useState("")
  const [isAuthenticating, setIsAuthenticating] = useState(false)
  const [authProvider, setAuthProvider] = useState<"google" | "kakao" | null>(null)

  // Supabase ê´€ë ¨ ìƒíƒœ
  const [supabase, setSupabase] = useState<any>(null)
  const [supabaseAvailable, setSupabaseAvailable] = useState(false)
  
  // ë¡œì»¬ ì¸ì¦ ìƒíƒœ (Supabase ì—†ì´ë„ ì‘ë™)
  const [isLoggedIn, setIsLoggedIn] = useState(false)
  const [localUser, setLocalUser] = useState<any>(null)

  // Supabase ì´ˆê¸°í™” (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ)
  useEffect(() => {
    const initializeSupabase = async () => {
      try {
        const { supabase: supabaseClient, isSupabaseAvailable } = await import('@/lib/supabase')
        setSupabase(supabaseClient)
        setSupabaseAvailable(isSupabaseAvailable())
      } catch (error) {
        console.log('Supabase ì´ˆê¸°í™” ì‹¤íŒ¨:', error)
        setSupabaseAvailable(false)
      }
    }

    initializeSupabase()
  }, [])

  const initializeChatMessages = (userName: string) => {
    const dummyMessages: ChatMessage[] = [
      {
        id: "1",
        text: "ì•ˆë…•í•˜ì„¸ìš”! í”„ë¡œí•„ì„ ë³´ê³  ì—°ë½ë“œë ¸ì–´ìš” ğŸ˜Š",
        sender: "me",
        timestamp: new Date(Date.now() - 3600000), // 1ì‹œê°„ ì „
        isRead: true,
      },
      {
        id: "2",
        text: "ì•ˆë…•í•˜ì„¸ìš”! ê´€ìƒ ê¶í•©ì´ ë†’ë‹¤ê³  ë‚˜ì™€ì„œ ì‹ ê¸°í–ˆì–´ìš” ã…ã…",
        sender: "other",
        timestamp: new Date(Date.now() - 3000000), // 50ë¶„ ì „
        isRead: true,
      },
      {
        id: "3",
        text: "ì €ë„ìš”! ë¶„ì„ ê²°ê³¼ë¥¼ ë³´ë‹ˆ ì •ë§ ì˜ ë§ì„ ê²ƒ ê°™ë”ë¼ê³ ìš”. ì–´ë–¤ ì¼ í•˜ì„¸ìš”?",
        sender: "me",
        timestamp: new Date(Date.now() - 2400000), // 40ë¶„ ì „
        isRead: true,
      },
      {
        id: "4",
        text: `${userName === "ê¹€ë¯¼ì¤€" ? "ë””ìì¸" : userName === "ì´ì„œì—°" ? "ë§ˆì¼€íŒ…" : "ê°œë°œ"} ì¼ì„ í•˜ê³  ìˆì–´ìš”. í”„ë¡œí•„ì—ì„œ ë³´ë‹ˆ ê´€ìƒì´ ì •ë§ ë”°ëœ»í•´ ë³´ì´ì‹œë”ë¼êµ¬ìš”!`,
        sender: "other",
        timestamp: new Date(Date.now() - 1800000), // 30ë¶„ ì „
        isRead: true,
      },
      {
        id: "5",
        text: "ê°ì‚¬í•´ìš”! ì‹œê°„ ë˜ì‹¤ ë•Œ ì»¤í”¼ í•œ ì” ì–´ë– ì„¸ìš”?",
        sender: "me",
        timestamp: new Date(Date.now() - 900000), // 15ë¶„ ì „
        isRead: true,
      },
    ]
    setMessages(dummyMessages)
  }

  const sendMessage = () => {
    if (newMessage.trim()) {
      const message: ChatMessage = {
        id: Date.now().toString(),
        text: newMessage.trim(),
        sender: "me",
        timestamp: new Date(),
        isRead: false,
      }
      setMessages((prev) => [...prev, message])
      setNewMessage("")

      // ìƒëŒ€ë°© ìë™ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
      setTimeout(() => {
        const responses = [
          "ì¢‹ì•„ìš”! ì–¸ì œê°€ ì¢‹ìœ¼ì‹¤ê¹Œìš”?",
          "ë„¤, ì¢‹ì€ ìƒê°ì´ì—ìš” ğŸ˜Š",
          "ì‹œê°„ ë§ì¶°ì„œ ì—°ë½ë“œë¦´ê²Œìš”!",
          "ê¸°ëŒ€ë˜ë„¤ìš” ã…ã…",
        ]
        const randomResponse = responses[Math.floor(Math.random() * responses.length)]
        const autoReply: ChatMessage = {
          id: (Date.now() + 1).toString(),
          text: randomResponse,
          sender: "other",
          timestamp: new Date(),
          isRead: false,
        }
        setMessages((prev) => [...prev, autoReply])
      }, 2000)
    }
  }

  const handlePhotoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0]
    if (file) {
      const reader = new FileReader()
      reader.onload = (e) => {
        const imageData = e.target?.result as string
        setUploadedImage(imageData)
        // ì‚¬ì§„ ì—…ë¡œë“œë§Œ í•˜ê³  ë¶„ì„ì€ í•˜ì§€ ì•ŠìŒ (í†µí•© ë¶„ì„ ë²„íŠ¼ì—ì„œ ì²˜ë¦¬)
      }
      reader.readAsDataURL(file)
    }
  }

  const startIntegratedAnalysis = async () => {
    if (!uploadedImage || !sajuData.birthDate) {
      alert('ì‚¬ì§„ê³¼ ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')
      return
    }

    setIsAnalyzing(true)
    setAnalysisProgress(3)
    setIntegratedAnalysisStep("analyzing")

    try {
      // ì´ë¯¸ì§€ íŒŒì¼ì„ File ê°ì²´ë¡œ ë³€í™˜
      const response = await fetch(uploadedImage)
      const blob = await response.blob()
      const imageFile = new File([blob], 'profile-image.jpg', { type: 'image/jpeg' })

      // FormData ìƒì„±
      const formData = new FormData()
      formData.append('imageFile', imageFile)
      formData.append('nickname', localUser?.nickname || 'ì‚¬ìš©ì')
      formData.append('gender', 'ë¯¸ì§€ì •')
      formData.append('birthDate', sajuData.birthDate)
      formData.append('birthTime', sajuData.birthTime || '00:00')

      // API í˜¸ì¶œ
      const apiResponse = await fetch('/api/analysis', {
        method: 'POST',
        body: formData
      })

      if (!apiResponse.ok) {
        throw new Error('API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }

      const result = await apiResponse.json()
      
      if (result.success) {
        // ê´€ìƒ ê²°ê³¼ ì €ì¥
        setFaceReadingResults(result.data.faceReading.keywords.map((keyword: string) => ({
          keyword,
          description: result.data.faceReading.interpretation
        })))
        
        // ì‚¬ì£¼ ê²°ê³¼ ì €ì¥
        setSajuResults(result.data.saju.keywords.map((keyword: string) => ({
          keyword,
          description: result.data.saju.personality
        })))
        
        console.log('í†µí•© ë¶„ì„ ì™„ë£Œ:', result.data)
        
        // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
        setIntegratedAnalysisStep("result")
      } else {
        throw new Error(result.error || 'ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }

    } catch (error) {
      console.error('í†µí•© ë¶„ì„ ì¤‘ ì˜¤ë¥˜:', error)
      
      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
      const shuffledFace = [...FACE_READING_KEYWORDS].sort(() => 0.5 - Math.random())
      const selectedFace = shuffledFace.slice(0, Math.floor(Math.random() * 3) + 3)
      setFaceReadingResults(selectedFace)
      
      const shuffledSaju = [...SAJU_KEYWORDS].sort(() => 0.5 - Math.random())
      const selectedSaju = shuffledSaju.slice(0, Math.floor(Math.random() * 3) + 3)
      setSajuResults(selectedSaju)
      
      // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
      setIntegratedAnalysisStep("result")
    } finally {
      setIsAnalyzing(false)
      setAnalysisProgress(0)
    }
  }

  const startAnalysisWithImage = async (imageData: string) => {
    setIsAnalyzing(true)
    setAnalysisProgress(3)

    try {
      // ì´ë¯¸ì§€ íŒŒì¼ì„ File ê°ì²´ë¡œ ë³€í™˜
      const response = await fetch(imageData)
      const blob = await response.blob()
      const imageFile = new File([blob], 'profile-image.jpg', { type: 'image/jpeg' })

      // FormData ìƒì„± (ê¸°ë³¸ê°’ ì‚¬ìš©)
      const formData = new FormData()
      formData.append('imageFile', imageFile)

      // API í˜¸ì¶œ
      const apiResponse = await fetch('/api/analysis', {
        method: 'POST',
        body: formData
      })

      if (!apiResponse.ok) {
        throw new Error('API í˜¸ì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }

      const result = await apiResponse.json()
      
      if (result.success) {
        // API ê²°ê³¼ë¥¼ ìƒíƒœì— ì €ì¥
        setFaceReadingResults(result.data.faceReading.keywords.map((keyword: string) => ({
          keyword,
          description: result.data.faceReading.interpretation
        })))
        
        console.log('ê´€ìƒ ë¶„ì„ ì™„ë£Œ:', result.data)
      } else {
        throw new Error(result.error || 'ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      }

    } catch (error) {
      console.error('ë¶„ì„ ì¤‘ ì˜¤ë¥˜:', error)
      
      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ì¡´ ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
      const shuffled = [...FACE_READING_KEYWORDS].sort(() => 0.5 - Math.random())
      const selected = shuffled.slice(0, Math.floor(Math.random() * 3) + 3)
      setFaceReadingResults(selected)
    } finally {
      setIsAnalyzing(false)
      setAnalysisProgress(0)
      // ì‚¬ì§„ ë¶„ì„ ì™„ë£Œ í›„ ë°”ë¡œ ì‚¬ì£¼ ì…ë ¥ ë‹¨ê³„ë¡œ ì§„í–‰
      setIntegratedAnalysisStep("input")
    }
  }

  const startAnalysis = async () => {
    if (!uploadedImage) {
      throw new Error('ì‚¬ì§„ì´ ì—…ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.')
    }
    await startAnalysisWithImage(uploadedImage)
  }

  const startSajuAnalysis = async () => {
    setIsSajuAnalyzing(true)
    setSajuProgress(3)
    // ì‚¬ì£¼ ë¶„ì„ ì‹œì‘ ì‹œ ë¡œë”© í™”ë©´ìœ¼ë¡œ ì´ë™
    setIntegratedAnalysisStep("analyzing")

    try {
      // ì‚¬ì£¼ ë°ì´í„° ê²€ì¦ (ìƒë…„ì›”ì¼ë§Œ í•„ìˆ˜)
      if (!sajuData.birthDate) {
        throw new Error('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
      }

      // ì‚¬ì£¼ ë¶„ì„ API í˜¸ì¶œ (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì§ì ‘ í˜¸ì¶œ)
      const sajuResult = await sajuService.analyzeSaju({
        birthDate: sajuData.birthDate,
        birthTime: sajuData.birthTime || '00:00', // ì¶œìƒ ì‹œê°„ì´ ì—†ìœ¼ë©´ ìì •ìœ¼ë¡œ ì„¤ì •
        birthPlace: sajuData.birthPlace
      })

      // ì‚¬ì£¼ ê²°ê³¼ë¥¼ ìƒíƒœì— ì €ì¥
      setSajuResults(sajuResult.keywords.map((keyword: string) => ({
        keyword,
        description: sajuResult.personality
      })))

      console.log('ì‚¬ì£¼ ë¶„ì„ ì™„ë£Œ:', sajuResult)

    } catch (error) {
      console.error('ì‚¬ì£¼ ë¶„ì„ ì¤‘ ì˜¤ë¥˜:', error)
      
      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ì¡´ ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
      const shuffled = [...SAJU_KEYWORDS].sort(() => 0.5 - Math.random())
      const selected = shuffled.slice(0, Math.floor(Math.random() * 3) + 3)
      setSajuResults(selected)
    } finally {
      setIsSajuAnalyzing(false)
      setSajuProgress(0)
      // ì‚¬ì£¼ ë¶„ì„ ì™„ë£Œ í›„ ë°”ë¡œ ê²°ê³¼ ë‹¨ê³„ë¡œ ì§„í–‰
      setIntegratedAnalysisStep("result")
    }
  }

  const handleInputChange = (field: string, value: any) => {
    setProfileData((prev) => ({ ...prev, [field]: value }))
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }))
    }
  }

  const handleSajuInputChange = (field: string, value: string) => {
    setSajuData((prev) => ({ ...prev, [field]: value }))
    if (sajuErrors[field]) {
      setSajuErrors((prev) => ({ ...prev, [field]: "" }))
    }
  }

  const validateProfile = () => {
    const newErrors: Record<string, string> = {}

    if (!profileData.nickname.trim()) newErrors.nickname = "ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!profileData.gender) newErrors.gender = "ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”"
    if (!profileData.birthDate) newErrors.birthDate = "ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!profileData.region) newErrors.region = "ê±°ì£¼ ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”"
    if (!profileData.height) newErrors.height = "í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!profileData.bodyType) newErrors.bodyType = "ì²´í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”"
    if (!profileData.job.trim()) newErrors.job = "ì§ì—…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!profileData.education) newErrors.education = "í•™ë ¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”"
    if (profileData.introduction.length > 1000) newErrors.introduction = "ìê¸°ì†Œê°œëŠ” ìµœëŒ€ 1000ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤"

    setErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const validateSajuData = () => {
    const newErrors: Record<string, string> = {}

    if (!sajuData.birthDate) newErrors.birthDate = "ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!sajuData.birthTime) newErrors.birthTime = "íƒœì–´ë‚œ ì‹œê°ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"
    if (!sajuData.birthPlace) newErrors.birthPlace = "íƒœì–´ë‚œ ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”"

    setSajuErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const handleIdealTypeToggle = (keyword: string) => {
    setSelectedIdealKeywords((prev) => {
      if (prev.includes(keyword)) {
        return prev.filter((k) => k !== keyword)
      } else if (prev.length < 3) {
        return [...prev, keyword]
      }
      return prev
    })
  }

  useEffect(() => {
    if (currentStep === "profile" && sajuData.birthDate && sajuData.birthTime) {
      setProfileData((prev) => ({
        ...prev,
        birthDate: sajuData.birthDate || prev.birthDate,
        birthTime: sajuData.birthTime || prev.birthTime,
      }))
    }
  }, [currentStep, sajuData.birthDate, sajuData.birthTime])

  const handleAdditionalPhotoUpload = (event: React.ChangeEvent<HTMLInputElement>) => {
    const files = event.target.files
    if (files) {
      const newPhotos: string[] = []
      Array.from(files).forEach((file) => {
        const reader = new FileReader()
        reader.onload = (e) => {
          const result = e.target?.result as string
          newPhotos.push(result)
          if (newPhotos.length === files.length) {
            setAdditionalPhotos((prev) => [...prev, ...newPhotos].slice(0, 5)) // ìµœëŒ€ 5ì¥ê¹Œì§€
          }
        }
        reader.readAsDataURL(file)
      })
    }
  }

  const removeAdditionalPhoto = (index: number) => {
    setAdditionalPhotos((prev) => prev.filter((_, i) => i !== index))
  }

  const handleEditProfileChange = (field: string, value: any) => {
    setEditProfileData((prev) => ({ ...prev, [field]: value }))
  }

  const saveProfileChanges = () => {
    setProfileData(editProfileData)
    setIsEditingProfile(false)
  }

  const cancelProfileEdit = () => {
    setEditProfileData(profileData)
    setIsEditingProfile(false)
  }

  // URL íŒŒë¼ë¯¸í„° ê°ì§€í•˜ì—¬ ìƒíƒœ ì—…ë°ì´íŠ¸
  useEffect(() => {
    const step = searchParams.get('step')
    const auth = searchParams.get('auth')
    
    if (step === 'integrated-analysis') {
      setCurrentStep('integrated-analysis')
              // integrated-analysis ë‹¨ê³„ì—ì„œëŠ” input ë‹¨ê³„ë¡œ ìë™ ì´ë™
        setIntegratedAnalysisStep('input')
      // ì¸ì¦ ìƒíƒœ ì´ˆê¸°í™”
      setIsAuthenticating(false)
      setAuthProvider(null)
    }
    
    if (auth === 'error') {
      alert('ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.')
      setIsAuthenticating(false)
      setAuthProvider(null)
    }
  }, [searchParams])

  // ì¸ì¦ ìƒíƒœ í™•ì¸ ë° ì´ˆê¸°í™” (Supabaseê°€ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ)
  useEffect(() => {
    if (!supabaseAvailable || !supabase) {
      console.log('Supabaseê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ì¸ì¦ ê¸°ëŠ¥ì„ ê±´ë„ˆëœë‹ˆë‹¤.')
      return
    }

    const checkAuthStatus = async () => {
      try {
        const { data: { session }, error } = await supabase.auth.getSession()
        
        if (error) {
          console.error('ì¸ì¦ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error)
          return
        }

        if (session) {
          console.log('ë¡œê·¸ì¸ëœ ì‚¬ìš©ì:', session.user.email)
          // ë¡œê·¸ì¸ëœ ìƒíƒœë¼ë©´ integrated-analysisë¡œ ì´ë™
          setCurrentStep('integrated-analysis')
        } else {
          console.log('ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœ')
          // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœë¼ë©´ onboardingìœ¼ë¡œ ìœ ì§€
          setCurrentStep('onboarding')
        }
      } catch (error) {
        console.error('ì¸ì¦ ìƒíƒœ í™•ì¸ ì˜ˆì™¸:', error)
        setCurrentStep('onboarding')
      }
    }

    checkAuthStatus()
  }, [supabaseAvailable, supabase])

  // ë¡œì»¬ ì¸ì¦ ìƒíƒœ (Supabase ì—†ì´ë„ ì‘ë™)
  const handleLocalLogin = (email: string, password: string) => {
    // ê°„ë‹¨í•œ ë¡œì»¬ ì¸ì¦ (ì‹¤ì œë¡œëŠ” ë” ì•ˆì „í•œ ë°©ì‹ ì‚¬ìš©)
    if (email && password) {
      const user = {
        id: 'local_user_' + Date.now(),
        email: email,
        nickname: email.split('@')[0],
        createdAt: new Date().toISOString()
      }
      
      setLocalUser(user)
      setIsLoggedIn(true)
      localStorage.setItem('localUser', JSON.stringify(user))
      
             // ë¡œê·¸ì¸ ì„±ê³µ í›„ integrated-analysisë¡œ ì´ë™
       setCurrentStep('integrated-analysis')
       setIntegratedAnalysisStep('input')
    }
  }

  // ë¡œì»¬ ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
  const handleLocalLogout = () => {
    setLocalUser(null)
    setIsLoggedIn(false)
    localStorage.removeItem('localUser')
    setCurrentStep('onboarding')
  }

  // ë¡œì»¬ ì‚¬ìš©ì ì •ë³´ ë³µì› (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ)
  useEffect(() => {
    const savedUser = localStorage.getItem('localUser')
    if (savedUser) {
      try {
        const user = JSON.parse(savedUser)
                 setLocalUser(user)
         setIsLoggedIn(true)
         setCurrentStep('integrated-analysis')
         setIntegratedAnalysisStep('input')
      } catch (error) {
        console.error('ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', error)
        localStorage.removeItem('localUser')
      }
    }
  }, [])

  // OAuth ì¸ì¦ í•¨ìˆ˜ë“¤ (Supabaseê°€ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ)
  const handleGoogleSignUp = async () => {
    if (!supabaseAvailable || !supabase) {
      // Supabaseê°€ ì—†ìœ¼ë©´ ë¡œì»¬ ì¸ì¦ìœ¼ë¡œ ëŒ€ì²´
      const email = prompt('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:')
      const password = prompt('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:')
      if (email && password) {
        handleLocalLogin(email, password)
      }
      return
    }

    setIsAuthenticating(true)
    setAuthProvider("google")
    
    try {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'google' as const,
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })
      
      if (error) {
        console.error('Google ë¡œê·¸ì¸ ì˜¤ë¥˜:', error)
        alert('Google ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
        setIsAuthenticating(false)
        setAuthProvider(null)
      } else {
        console.log('Google ë¡œê·¸ì¸ ì„±ê³µ:', data)
        // íŒì—…ì´ ì—´ë¦¬ë©´ ìƒíƒœëŠ” ìœ ì§€, ì½œë°±ì—ì„œ ì²˜ë¦¬
      }
    } catch (error) {
      console.error('Google ë¡œê·¸ì¸ ì˜ˆì™¸:', error)
      alert('Google ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
      setIsAuthenticating(false)
      setAuthProvider(null)
    }
  }

  const handleKakaoSignUp = async () => {
    if (!supabaseAvailable || !supabase) {
      // Supabaseê°€ ì—†ìœ¼ë©´ ë¡œì»¬ ì¸ì¦ìœ¼ë¡œ ëŒ€ì²´
      const email = prompt('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:')
      const password = prompt('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”:')
      if (email && password) {
        handleLocalLogin(email, password)
      }
      return
    }

    setIsAuthenticating(true)
    setAuthProvider("kakao")
    
    try {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'kakao' as const,
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })
      
      if (error) {
        console.error('Kakao ë¡œê·¸ì¸ ì˜¤ë¥˜:', error)
        alert('Kakao ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
        setIsAuthenticating(false)
        setAuthProvider(null)
      } else {
        console.log('Kakao ë¡œê·¸ì¸ ì„±ê³µ:', data)
        // íŒì—…ì´ ì—´ë¦¬ë©´ ìƒíƒœëŠ” ìœ ì§€, ì½œë°±ì—ì„œ ì²˜ë¦¬
      }
    } catch (error) {
      console.error('Kakao ë¡œê·¸ì¸ ì˜ˆì™¸:', error)
      alert('Kakao ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
      setIsAuthenticating(false)
      setAuthProvider(null)
    }
  }

  // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜ (Supabaseê°€ ì„¤ì •ëœ ê²½ìš°ì—ë§Œ)
  const handleLogout = async () => {
    if (!supabaseAvailable || !supabase) {
      // Supabaseê°€ ì—†ìœ¼ë©´ ë¡œì»¬ ë¡œê·¸ì•„ì›ƒ
      handleLocalLogout()
      return
    }

    try {
      const { error } = await supabase.auth.signOut()
      
      if (error) {
        console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error)
        alert('ë¡œê·¸ì•„ì›ƒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
      } else {
        console.log('ë¡œê·¸ì•„ì›ƒ ì„±ê³µ')
        // ë¡œê·¸ì•„ì›ƒ í›„ onboardingìœ¼ë¡œ ì´ë™
        setCurrentStep('onboarding')
        // URL íŒŒë¼ë¯¸í„° ì œê±°
        window.history.replaceState({}, '', '/')
      }
    } catch (error) {
      console.error('ë¡œê·¸ì•„ì›ƒ ì˜ˆì™¸:', error)
      alert('ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
    }
  }

  if (currentStep === "onboarding") {
  return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        {/* ì¥ì‹ì  íŒ¨í„´ */}
        <div className="absolute top-8 left-8 w-12 h-12 border-2 border-amber-400/30 border-dashed rounded-lg"></div>
        <div className="absolute top-8 right-8 w-12 h-12 border-2 border-amber-400/30 border-dashed rounded-lg"></div>
        <div className="absolute bottom-8 left-8 w-12 h-12 border-2 border-amber-400/30 border-dashed rounded-lg"></div>
        <div className="absolute bottom-8 right-8 w-12 h-12 border-2 border-amber-400/30 border-dashed rounded-lg"></div>

        {/* ë©”ì¸ ì»¨í…ì¸  */}
        <div className="text-center max-w-4xl mx-auto">
          {/* ì„œë¹„ìŠ¤ ì†Œê°œ ì¹´ë“œ */}
          <div className="relative mb-12">
            <div className="flex items-center justify-center mb-8">
              {/* ëª¨ë°”ì¼ ê¸°ê¸° 1 */}
              <div className="relative transform -rotate-12 mr-8">
                <div className="w-64 h-96 bg-white rounded-3xl p-4 shadow-2xl">
                  <div className="w-full h-full bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 flex flex-col">
                    <div className="text-amber-400 text-lg font-bold mb-4">ê´€ìƒ ë¶„ì„</div>
                    <div className="flex-1 flex flex-col justify-center space-y-3">
                      <div className="bg-amber-400/20 rounded-lg p-3">
                        <div className="text-amber-400 text-sm font-semibold">ëˆˆ</div>
                        <div className="text-white text-xs">ë”°ëœ»í•˜ê³  ê°ì„±ì </div>
                      </div>
                      <div className="bg-amber-400/20 rounded-lg p-3">
                        <div className="text-amber-400 text-sm font-semibold">ì½”</div>
                        <div className="text-white text-xs">ì˜ì§€ê°€ ê°•í•¨</div>
                      </div>
                      <div className="bg-amber-400/20 rounded-lg p-3">
                        <div className="text-amber-400 text-sm font-semibold">ì…</div>
                        <div className="text-white text-xs">ì†Œí†µ ëŠ¥ë ¥ ìš°ìˆ˜</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* ëª¨ë°”ì¼ ê¸°ê¸° 2 */}
              <div className="relative transform rotate-6">
                <div className="w-64 h-96 bg-white rounded-3xl p-4 shadow-2xl">
                  <div className="w-full h-full bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-4 flex flex-col">
                    <div className="text-amber-400 text-lg font-bold mb-4">ì‚¬ì£¼ ë¶„ì„</div>
                    <div className="flex-1 flex flex-col justify-center items-center space-y-4">
                      <div className="w-32 h-32 rounded-full bg-gradient-to-br from-amber-400/30 to-amber-600/30 flex items-center justify-center">
                        <div className="text-amber-400 text-2xl">ğŸŒŸ</div>
                      </div>
                      <div className="text-center">
                        <div className="text-amber-400 font-semibold mb-2">ì—°ì• ìš´ ìƒìŠ¹</div>
                        <div className="text-white text-sm">ì´ìƒì ì¸ ë§Œë‚¨ ì˜ˆì •</div>
                      </div>
                      <button className="bg-amber-400 text-black px-6 py-2 rounded-full text-sm font-semibold">
                        START
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* ì„œë¹„ìŠ¤ ì„¤ëª… í…ìŠ¤íŠ¸ */}
            <div className="text-right">
              <h2 className="text-2xl font-bold text-white mb-2">ì˜¤ë¡œì§€ ë‹¹ì‹ ë§Œì„ ìœ„í•œ</h2>
              <h1 className="text-4xl font-bold text-amber-400 mb-4">ì„¸ìƒì— ë‹¨ í•˜ë‚˜ë¿ì¸ ê´€ìƒ ì‚¬ì£¼ ë§¤ì¹­</h1>
              <h3 className="text-3xl font-bold text-amber-400">ê´€ìƒì€ ê³¼í•™ì´ë‹¤</h3>
            </div>
          </div>

          {/* ì‹œì‘ ë²„íŠ¼ */}
          <button
            onClick={() => {
              console.log('ìš´ëª… ì°¾ê¸° ì‹œì‘ ë²„íŠ¼ í´ë¦­ë¨')
              setCurrentStep("login")
              console.log('currentStepì„ loginìœ¼ë¡œ ì„¤ì •í•¨')
            }}
            className="bg-amber-400 hover:bg-amber-500 text-black px-12 py-4 rounded-full text-xl font-bold transition-colors shadow-lg"
          >
            ìš´ëª… ì°¾ê¸° ì‹œì‘
          </button>
        </div>

        {/* ì ì„  í…Œë‘ë¦¬ */}
        <div className="absolute inset-4 border-2 border-amber-400/20 border-dashed rounded-3xl pointer-events-none"></div>
      </div>
    )
  }

  if (currentStep === "signup") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        <div className="text-center max-w-md mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8">íšŒì›ê°€ì…</h1>
          
          <div className="bg-white/10 rounded-2xl p-8 mb-6">
            <div className="space-y-4">
              <div>
                <label className="block text-left text-white mb-2">ì´ë©”ì¼</label>
                <input
                  type="email"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-left text-white mb-2">ë¹„ë°€ë²ˆí˜¸</label>
                <input
                  type="password"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-left text-white mb-2">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                <input
                  type="password"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
            </div>
          </div>

          <button
            onClick={() => {
              // ê°„ë‹¨í•œ ìœ íš¨ì„± ê²€ì‚¬ (ì‹¤ì œë¡œëŠ” ë” ì—„ê²©í•˜ê²Œ)
              const email = document.querySelector('input[type="email"]') as HTMLInputElement
              const password = document.querySelector('input[type="password"]') as HTMLInputElement
              
              if (!email?.value || !password?.value) {
                alert('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')
                return
              }
              
              // ë¡œì»¬ íšŒì›ê°€ì… ì²˜ë¦¬
              handleLocalLogin(email.value, password.value)
            }}
            className="bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors mb-4 w-full"
          >
            íšŒì›ê°€ì… ì™„ë£Œ
          </button>



          <div className="text-center space-y-4">
            <button
              onClick={() => setCurrentStep("login")}
              className="text-amber-400 hover:text-amber-300 text-sm transition-colors block w-full"
            >
              ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°
            </button>
            
            <div className="text-center">
              <span className="text-white/60 text-sm">ë˜ëŠ”</span>
            </div>
            
            <button
              onClick={handleGoogleSignUp}
              className="bg-white hover:bg-gray-100 text-gray-800 px-8 py-3 rounded-full text-lg font-semibold transition-colors mb-3 w-full flex items-center justify-center"
            >
              <span className="mr-2">ğŸ”</span>
              Googleë¡œ íšŒì›ê°€ì…
            </button>

            <button
              onClick={handleKakaoSignUp}
              className="bg-yellow-400 hover:bg-yellow-500 text-black px-8 py-3 rounded-full text-lg font-semibold transition-colors w-full flex items-center justify-center"
            >
              <span className="mr-2">ğŸ’¬</span>
              ì¹´ì¹´ì˜¤ë¡œ íšŒì›ê°€ì…
            </button>
          </div>
        </div>
      </div>
    )
  }

  if (currentStep === "login") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        <div className="text-center max-w-md mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8">ë¡œê·¸ì¸</h1>
          
          <div className="bg-white/10 rounded-2xl p-8 mb-6">
            <div className="space-y-4">
              <div>
                <label className="block text-left text-white mb-2">ì´ë©”ì¼</label>
                <input
                  type="email"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-left text-white mb-2">ë¹„ë°€ë²ˆí˜¸</label>
                <input
                  type="password"
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
            </div>
          </div>

          <button
            onClick={() => {
              // ê°„ë‹¨í•œ ìœ íš¨ì„± ê²€ì‚¬
              const email = document.querySelector('input[type="email"]') as HTMLInputElement
              const password = document.querySelector('input[type="password"]') as HTMLInputElement
              
              if (!email?.value || !password?.value) {
                alert('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')
                return
              }
              
              // ë¡œì»¬ ë¡œê·¸ì¸ ì²˜ë¦¬
              handleLocalLogin(email.value, password.value)
            }}
            className="bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors mb-4 w-full"
          >
            ë¡œê·¸ì¸
          </button>

          <div className="text-center space-y-4">
            <button
              onClick={() => setCurrentStep("signup")}
              className="text-amber-400 hover:text-amber-300 text-sm transition-colors block w-full"
            >
              ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…í•˜ê¸°
            </button>
            
            <div className="text-center">
              <span className="text-white/60 text-sm">ë˜ëŠ”</span>
            </div>
            
            <button
              onClick={handleGoogleSignUp}
              className="bg-white hover:bg-gray-100 text-gray-800 px-8 py-3 rounded-full text-lg font-semibold transition-colors mb-3 w-full flex items-center justify-center"
            >
              <span className="mr-2">ğŸ”</span>
              Googleë¡œ ë¡œê·¸ì¸
            </button>

            <button
              onClick={handleKakaoSignUp}
              className="bg-yellow-400 hover:bg-yellow-500 text-black px-8 py-3 rounded-full text-lg font-semibold transition-colors w-full flex items-center justify-center"
            >
              <span className="mr-2">ğŸ’¬</span>
              ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸
            </button>
          </div>
        </div>
      </div>
    )
  }

  // OAuth ì¸ì¦ ì¤‘ í™”ë©´
  if (isAuthenticating) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        <div className="text-center max-w-md mx-auto">
          <div className="animate-spin rounded-full h-24 w-24 border-b-2 border-amber-400 mx-auto mb-6"></div>
          <h1 className="text-3xl font-bold text-amber-400 mb-4">
            {authProvider === "google" ? "Google" : "ì¹´ì¹´ì˜¤"} íšŒì›ê°€ì… ì§„í–‰ ì¤‘
          </h1>
          <p className="text-xl text-white mb-6">
            {authProvider === "google" ? "Google" : "ì¹´ì¹´ì˜¤"}ì—ì„œ ì¸ì¦ì„ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.
          </p>
          <div className="bg-white/10 rounded-2xl p-6">
            <p className="text-white/80 text-sm">
              íŒì—… ì°½ì´ ì—´ë ¸ë‹¤ë©´ ì¸ì¦ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.
            </p>
            <p className="text-white/60 text-xs mt-2">
              íŒì—…ì´ ì°¨ë‹¨ëœ ê²½ìš° ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
            </p>
          </div>
          <button
            onClick={() => {
              setIsAuthenticating(false)
              setAuthProvider(null)
            }}
            className="text-amber-400 hover:text-amber-300 text-sm transition-colors mt-6"
          >
            ì·¨ì†Œí•˜ê³  ëŒì•„ê°€ê¸°
          </button>
        </div>
      </div>
    )
  }

  // í”„ë¡œí•„ ë“±ë¡ í˜ì´ì§€
  if (currentStep === "profile") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        <div className="max-w-2xl mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8 text-center">í”„ë¡œí•„ ë“±ë¡</h1>
          <p className="text-xl text-white mb-8 text-center">ë‹¹ì‹ ì„ ì†Œê°œí•´ì£¼ì„¸ìš”</p>
          
          <div className="bg-white/10 rounded-2xl p-8">
            <div className="space-y-6">
              {/* ê¸°ë³¸ ì •ë³´ */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-white mb-2">ë‹‰ë„¤ì„ *</label>
                  <input
                    type="text"
                    value={profileData.nickname}
                    onChange={(e) => handleInputChange("nickname", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                    placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”"
                  />
                  {errors.nickname && <p className="text-red-400 text-sm mt-1">{errors.nickname}</p>}
                </div>
                
                <div>
                  <label className="block text-white mb-2">ì„±ë³„ *</label>
                  <select
                    value={profileData.gender}
                    onChange={(e) => handleInputChange("gender", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  >
                    <option value="">ì„±ë³„ ì„ íƒ</option>
                    <option value="ë‚¨ì„±">ë‚¨ì„±</option>
                    <option value="ì—¬ì„±">ì—¬ì„±</option>
                  </select>
                  {errors.gender && <p className="text-red-400 text-sm mt-1">{errors.gender}</p>}
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-white mb-2">ìƒë…„ì›”ì¼ *</label>
                  <input
                    type="date"
                    value={profileData.birthDate}
                    onChange={(e) => handleInputChange("birthDate", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  />
                  {errors.birthDate && <p className="text-red-400 text-sm mt-1">{errors.birthDate}</p>}
                </div>
                
                <div>
                  <label className="block text-white mb-2">ì¶œìƒ ì‹œê°„</label>
                  <select
                    value={profileData.birthTime}
                    onChange={(e) => handleInputChange("birthTime", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  >
                    <option value="">ì—†ìŒ</option>
                    <option value="00:00">ìì‹œ (23:00-01:00)</option>
                    <option value="02:00">ì¶•ì‹œ (01:00-03:00)</option>
                    <option value="04:00">ì¸ì‹œ (03:00-05:00)</option>
                    <option value="06:00">ë¬˜ì‹œ (05:00-07:00)</option>
                    <option value="08:00">ì§„ì‹œ (07:00-09:00)</option>
                    <option value="10:00">ì‚¬ì‹œ (09:00-11:00)</option>
                    <option value="12:00">ì˜¤ì‹œ (11:00-13:00)</option>
                    <option value="14:00">ë¯¸ì‹œ (13:00-15:00)</option>
                    <option value="16:00">ì‹ ì‹œ (15:00-17:00)</option>
                    <option value="18:00">ìœ ì‹œ (17:00-19:00)</option>
                    <option value="20:00">ìˆ ì‹œ (19:00-21:00)</option>
                    <option value="22:00">í•´ì‹œ (21:00-23:00)</option>
                  </select>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-white mb-2">ê±°ì£¼ ì§€ì—­ *</label>
                  <select
                    value={profileData.region}
                    onChange={(e) => handleInputChange("region", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  >
                    <option value="">ì§€ì—­ ì„ íƒ</option>
                    <option value="ì„œìš¸">ì„œìš¸</option>
                    <option value="ê²½ê¸°">ê²½ê¸°</option>
                    <option value="ì¸ì²œ">ì¸ì²œ</option>
                    <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                    <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                    <option value="ê´‘ì£¼">ê´‘ì£¼</option>
                    <option value="ëŒ€ì „">ëŒ€ì „</option>
                    <option value="ìš¸ì‚°">ìš¸ì‚°</option>
                    <option value="ê°•ì›">ê°•ì›</option>
                    <option value="ì¶©ë¶">ì¶©ë¶</option>
                    <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
                    <option value="ì „ë¶">ì „ë¶</option>
                    <option value="ì „ë‚¨">ì „ë‚¨</option>
                    <option value="ê²½ë¶">ê²½ë¶</option>
                    <option value="ê²½ë‚¨">ê²½ë‚¨</option>
                    <option value="ì œì£¼">ì œì£¼</option>
                  </select>
                  {errors.region && <p className="text-red-400 text-sm mt-1">{errors.region}</p>}
                </div>
                
                <div>
                  <label className="block text-white mb-2">í‚¤</label>
                  <input
                    type="text"
                    value={profileData.height}
                    onChange={(e) => handleInputChange("height", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                    placeholder="ì˜ˆ: 170cm"
                  />
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="block text-white mb-2">ì²´í˜•</label>
                  <select
                    value={profileData.bodyType}
                    onChange={(e) => handleInputChange("bodyType", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  >
                    <option value="">ì²´í˜• ì„ íƒ</option>
                    <option value="ë§ˆë¥¸ ì²´í˜•">ë§ˆë¥¸ ì²´í˜•</option>
                    <option value="ë³´í†µ ì²´í˜•">ë³´í†µ ì²´í˜•</option>
                    <option value="í†µí†µí•œ ì²´í˜•">í†µí†µí•œ ì²´í˜•</option>
                    <option value="ê·¼ìœ¡ì§ˆ ì²´í˜•">ê·¼ìœ¡ì§ˆ ì²´í˜•</option>
                  </select>
                </div>
                
                <div>
                  <label className="block text-white mb-2">ì§ì—… *</label>
                  <input
                    type="text"
                    value={profileData.job}
                    onChange={(e) => handleInputChange("job", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                    placeholder="ì§ì—…ì„ ì…ë ¥í•˜ì„¸ìš”"
                  />
                  {errors.job && <p className="text-red-400 text-sm mt-1">{errors.job}</p>}
                </div>
              </div>

              <div>
                <label className="block text-white mb-2">í•™ë ¥</label>
                <select
                  value={profileData.education}
                  onChange={(e) => handleInputChange("education", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                >
                  <option value="">í•™ë ¥ ì„ íƒ</option>
                  <option value="ê³ ë“±í•™êµ ì¡¸ì—…">ê³ ë“±í•™êµ ì¡¸ì—…</option>
                  <option value="ëŒ€í•™êµ ì¬í•™">ëŒ€í•™êµ ì¬í•™</option>
                  <option value="ëŒ€í•™êµ ì¡¸ì—…">ëŒ€í•™êµ ì¡¸ì—…</option>
                  <option value="ëŒ€í•™ì› ì¬í•™">ëŒ€í•™ì› ì¬í•™</option>
                  <option value="ëŒ€í•™ì› ì¡¸ì—…">ëŒ€í•™ì› ì¡¸ì—…</option>
                </select>
              </div>

              <div>
                <label className="block text-white mb-2">ìê¸°ì†Œê°œ</label>
                <textarea
                  value={profileData.introduction}
                  onChange={(e) => handleInputChange("introduction", e.target.value)}
                  rows={4}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none resize-none"
                  placeholder="ìì‹ ì„ ì†Œê°œí•´ì£¼ì„¸ìš” (ìµœëŒ€ 1000ì)"
                />
                <div className="text-right text-sm text-gray-400 mt-1">
                  {profileData.introduction.length}/1000
                </div>
              </div>

              {/* ì¶”ê°€ ì‚¬ì§„ ì—…ë¡œë“œ */}
              <div>
                <label className="block text-white mb-2">ì¶”ê°€ ì‚¬ì§„ (ìµœëŒ€ 5ì¥)</label>
                <div className="bg-white/10 rounded-lg p-4 border-2 border-dashed border-white/30">
                  <input
                    type="file"
                    accept="image/*"
                    multiple
                    onChange={handleAdditionalPhotoUpload}
                    className="hidden"
                    id="additional-photo-upload"
                  />
                  <label
                    htmlFor="additional-photo-upload"
                    className="flex flex-col items-center justify-center cursor-pointer"
                  >
                    <div className="text-4xl mb-2">ğŸ“¸</div>
                    <p className="text-white text-center mb-2">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì¶”ê°€</p>
                    <p className="text-gray-400 text-sm text-center">ì—¬ëŸ¬ ì¥ ì„ íƒ ê°€ëŠ¥</p>
                  </label>
                </div>
                
                {/* ì—…ë¡œë“œëœ ì¶”ê°€ ì‚¬ì§„ë“¤ */}
                {additionalPhotos.length > 0 && (
                  <div className="mt-4">
                    <p className="text-white mb-2">ì—…ë¡œë“œëœ ì‚¬ì§„ ({additionalPhotos.length}/5)</p>
                    <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                      {additionalPhotos.map((photo, index) => (
                        <div key={index} className="relative">
                          <img
                            src={photo}
                            alt={`ì¶”ê°€ ì‚¬ì§„ ${index + 1}`}
                            className="w-full h-24 object-cover rounded-lg"
                          />
                          <button
                            onClick={() => removeAdditionalPhoto(index)}
                            className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600"
                          >
                            Ã—
                          </button>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>

              {/* ì´ìƒí˜• í‚¤ì›Œë“œ ì„ íƒ */}
              <div>
                <label className="block text-white mb-2">ì´ìƒí˜• í‚¤ì›Œë“œ (ìµœëŒ€ 3ê°œ)</label>
                <div className="flex flex-wrap gap-2">
                  {IDEAL_TYPE_KEYWORDS.map((keyword) => (
                    <button
                      key={keyword}
                      onClick={() => handleIdealTypeToggle(keyword)}
                      className={`px-3 py-2 rounded-full text-sm transition-colors ${
                        selectedIdealKeywords.includes(keyword)
                          ? "bg-amber-400 text-black"
                          : "bg-white/20 text-white hover:bg-white/30"
                      }`}
                    >
                      {keyword}
                    </button>
                  ))}
                </div>
                <p className="text-sm text-gray-400 mt-2">
                  ì„ íƒëœ í‚¤ì›Œë“œ: {selectedIdealKeywords.join(", ") || "ì—†ìŒ"}
                </p>
              </div>
            </div>

            {/* í•˜ë‹¨ ë²„íŠ¼ */}
            <div className="flex flex-col sm:flex-row gap-4 mt-8">
              <button
                onClick={() => setCurrentStep("integrated-analysis")}
                className="flex-1 bg-white/20 hover:bg-white/30 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors border border-white/30"
              >
                ë’¤ë¡œ ê°€ê¸°
              </button>
              <button
                onClick={() => {
                  if (validateProfile()) {
                    setCurrentStep("home") // ë°”ë¡œ ë§¤ì¹­ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
                    setIntegratedAnalysisStep("input") // ìƒíƒœ ì´ˆê¸°í™”ë¡œ ë¦¬í¬íŠ¸ í™”ë©´ ë Œë”ë§ ë°©ì§€
                  }
                }}
                className="flex-1 bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors"
              >
                í”„ë¡œí•„ ì™„ë£Œ
              </button>
            </div>
          </div>
        </div>
      </div>
    )
  }

  // í™ˆ í™”ë©´ (ë§¤ì¹­ ê²°ê³¼ í˜ì´ì§€) - currentStepì„ ë¨¼ì € ì²´í¬
  if (currentStep === "home") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8 text-center">ğŸ’• ì´ìƒí˜• ë§¤ì¹­</h1>
          <p className="text-xl text-white mb-8 text-center">AIê°€ ë‹¹ì‹ ê³¼ ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!</p>
          
          {/* ë§¤ì¹­ ê²°ê³¼ í‘œì‹œ */}
          <div className="space-y-6">
            {dummyMatches.map((match, index) => (
              <div key={index} className="bg-white/10 rounded-2xl p-6 border border-white/20">
                <div className="flex flex-col md:flex-row gap-6">
                  {/* í”„ë¡œí•„ ì‚¬ì§„ */}
                  <div className="flex-shrink-0">
                    <div className="w-32 h-32 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-4xl">
                      ğŸ‘¤
                    </div>
                  </div>
                  
                  {/* í”„ë¡œí•„ ì •ë³´ */}
                  <div className="flex-1">
                    <div className="flex items-center gap-4 mb-4">
                      <h3 className="text-2xl font-bold text-amber-400">{match.name}</h3>
                      <span className="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                        {match.totalCompatibility}% ê¶í•©
                      </span>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                      <div>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ë‚˜ì´:</span> {match.age}ì„¸</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ì§ì—…:</span> {match.job}</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ì§€ì—­:</span> {match.region}</p>
                      </div>
                      <div>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">í‚¤:</span> {match.height}</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">í•™ë ¥:</span> {match.education}</p>
                      </div>
                    </div>
                    
                    <p className="text-gray-300 mb-4">{match.introduction}</p>
                    
                    {/* ê¶í•© ë¶„ì„ */}
                    <div className="grid grid-cols-2 gap-4 mb-4">
                      <div className="bg-green-500/20 rounded-lg p-3">
                        <p className="text-green-400 font-semibold mb-1">ê´€ìƒ ê¶í•©</p>
                        <p className="text-white text-sm">{match.faceAnalysis}</p>
                      </div>
                      <div className="bg-blue-500/20 rounded-lg p-3">
                        <p className="text-blue-400 font-semibold mb-1">ì‚¬ì£¼ ê¶í•©</p>
                        <p className="text-white text-sm">{match.sajuAnalysis}</p>
                      </div>
                    </div>
                    
                    {/* í‚¤ì›Œë“œ */}
                    <div className="flex flex-wrap gap-2 mb-4">
                      {match.keywords.map((keyword, idx) => (
                        <span key={idx} className="bg-amber-400/20 text-amber-400 px-2 py-1 rounded-full text-xs border border-amber-400">
                          {keyword}
                        </span>
                      ))}
                    </div>
                  </div>
                </div>
                
                {/* ì•¡ì…˜ ë²„íŠ¼ */}
                <div className="flex flex-col sm:flex-row gap-3 mt-6">
                  <button
                    onClick={() => {
                      setSelectedUser(match)
                      setCurrentStep("other-profile")
                    }}
                    className="flex-1 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full font-bold transition-colors border border-white/30"
                  >
                    í”„ë¡œí•„ ìì„¸íˆ ë³´ê¸°
                  </button>
                  <button
                    onClick={() => {
                      setSelectedUser(match)
                      initializeChatMessages(match.name)
                      setCurrentStep("dm-chat")
                    }}
                    className="flex-1 bg-amber-400 hover:bg-amber-500 text-black px-6 py-3 rounded-full font-bold transition-colors"
                  >
                    ğŸ’¬ ë©”ì‹œì§€ ë³´ë‚´ê¸°
                  </button>
                </div>
              </div>
            ))}
          </div>
          
          {/* í•˜ë‹¨ ë²„íŠ¼ */}
          <div className="flex flex-col sm:flex-row gap-4 justify-center mt-8">
            <button
              onClick={() => setCurrentStep("my-profile")}
              className="bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full font-bold transition-colors border border-white/30"
            >
              ë‚˜ì˜ í”„ë¡œí•„ ë³´ê¸°
            </button>
            <button
              onClick={() => alert("ë” ë§ì€ ë§¤ì¹­ ê²°ê³¼ë¥¼ ë³´ë ¤ë©´ í”„ë¦¬ë¯¸ì—„ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”!")}
              className="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors"
            >
              ë” ë§ì€ ë§¤ì¹­ ë³´ê¸°
            </button>
          </div>
        </div>
      </div>
    )
  }

  // í”„ë¡œí•„ ìì„¸íˆ ë³´ê¸° í˜ì´ì§€
  if (currentStep === "other-profile" && selectedUser) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        <div className="max-w-4xl mx-auto">
          {/* í—¤ë” */}
          <div className="text-center mb-8">
            <button
              onClick={() => setCurrentStep("home")}
              className="absolute left-6 top-6 bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-full font-semibold transition-colors border border-white/30"
            >
              â† ë’¤ë¡œ ê°€ê¸°
            </button>
            <h1 className="text-4xl font-bold text-amber-400">{selectedUser.name}ë‹˜ì˜ í”„ë¡œí•„</h1>
            <p className="text-xl text-white mt-2">ë” ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”</p>
          </div>

          {/* í”„ë¡œí•„ ì‚¬ì§„ ì„¹ì…˜ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8 text-center">
            <div className="w-48 h-48 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-8xl mx-auto mb-6">
              ğŸ‘¤
            </div>
            <div className="bg-green-500 text-white px-6 py-2 rounded-full text-lg font-bold inline-block">
              {selectedUser.totalCompatibility}% ê¶í•©
            </div>
          </div>

          {/* ê¸°ë³¸ ì •ë³´ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ê¸°ë³¸ ì •ë³´</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="space-y-4">
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">ë‚˜ì´</label>
                  <p className="text-white text-lg">{selectedUser.age}ì„¸</p>
                </div>
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">ì§ì—…</label>
                  <p className="text-white text-lg">{selectedUser.job}</p>
                </div>
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">ì§€ì—­</label>
                  <p className="text-white text-lg">{selectedUser.region}</p>
                </div>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">í‚¤</label>
                  <p className="text-white text-lg">{selectedUser.height}</p>
                </div>
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">í•™ë ¥</label>
                  <p className="text-white text-lg">{selectedUser.education}</p>
                </div>
                <div>
                  <label className="block text-amber-400 font-semibold mb-2">ì²´í˜•</label>
                  <p className="text-white text-lg">{selectedUser.bodyType || "ì •ë³´ ì—†ìŒ"}</p>
                </div>
              </div>
            </div>
          </div>

          {/* ìê¸°ì†Œê°œ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ìê¸°ì†Œê°œ</h2>
            <p className="text-white text-lg leading-relaxed">{selectedUser.introduction}</p>
          </div>

          {/* ê¶í•© ë¶„ì„ ìƒì„¸ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ê¶í•© ë¶„ì„</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="bg-green-500/20 rounded-xl p-6 border border-green-400/30">
                <h3 className="text-xl font-bold text-green-400 mb-4">ê´€ìƒ ê¶í•©</h3>
                <p className="text-white leading-relaxed">{selectedUser.faceAnalysis}</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-green-400 font-semibold">ê¶í•©ë„</span>
                    <span className="text-white font-bold">85%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-green-400 h-2 rounded-full" style={{ width: '85%' }}></div>
                  </div>
                </div>
              </div>
              <div className="bg-blue-500/20 rounded-xl p-6 border border-blue-400/30">
                <h3 className="text-xl font-bold text-blue-400 mb-4">ì‚¬ì£¼ ê¶í•©</h3>
                <p className="text-white leading-relaxed">{selectedUser.sajuAnalysis}</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-blue-400 font-semibold">ê¶í•©ë„</span>
                    <span className="text-white font-bold">78%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-blue-400 h-2 rounded-full" style={{ width: '78%' }}></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* í‚¤ì›Œë“œ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ì„±í–¥ í‚¤ì›Œë“œ</h2>
            <div className="flex flex-wrap gap-3">
              {selectedUser.keywords.map((keyword: string, idx: number) => (
                <span key={idx} className="bg-amber-400/20 text-amber-400 px-4 py-2 rounded-full text-sm font-semibold border border-amber-400">
                  {keyword}
                </span>
              ))}
            </div>
          </div>

          {/* ì•¡ì…˜ ë²„íŠ¼ */}
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button
              onClick={() => setCurrentStep("home")}
              className="bg-white/20 hover:bg-white/30 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors border border-white/30"
            >
              ë§¤ì¹­ ëª©ë¡ìœ¼ë¡œ
            </button>
            <button
              onClick={() => {
                initializeChatMessages(selectedUser.name)
                setCurrentStep("dm-chat")
              }}
              className="bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors"
            >
              ğŸ’¬ ë©”ì‹œì§€ ë³´ë‚´ê¸°
            </button>
          </div>

          {/* ìƒëŒ€ë°© ê´€ìƒ ë¶„ì„ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ğŸ­ {selectedUser.name}ë‹˜ì˜ ê´€ìƒ ë¶„ì„</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div className="bg-green-500/20 rounded-xl p-6 border border-green-400/30">
                <h3 className="text-xl font-bold text-green-400 mb-4">ëˆˆì˜ íŠ¹ì§•</h3>
                <p className="text-white leading-relaxed">í° ëˆˆê³¼ ê¸´ ì†ëˆˆì¹ìœ¼ë¡œ ê°ì • í‘œí˜„ì´ í’ë¶€í•˜ê³  ì§ê´€ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ëˆˆê¼¬ë¦¬ê°€ ì‚´ì§ ì˜¬ë¼ê°„ í˜•íƒœë¡œ ìì‹ ê° ìˆê³  ë¦¬ë”ì‹­ì„ ê°€ì§„ ì¸ìƒì„ ì¤ë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-green-400 font-semibold">ì§ê´€ë ¥</span>
                    <span className="text-white font-bold">92%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-green-400 h-2 rounded-full" style={{ width: '92%' }}></div>
                  </div>
                </div>
              </div>
              <div className="bg-blue-500/20 rounded-xl p-6 border border-blue-400/30">
                <h3 className="text-xl font-bold text-blue-400 mb-4">ì…ì˜ íŠ¹ì§•</h3>
                <p className="text-white leading-relaxed">ì…ê¼¬ë¦¬ê°€ ì˜¬ë¼ê°„ ë¯¸ì†ŒëŠ” ê¸ì •ì ì´ê³  ì¹œê·¼í•œ ì„±ê²©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë§ì”€ì´ ë§ê³  ëŒ€í™”ë¥¼ ì¦ê¸°ë©°, íƒ€ì¸ê³¼ì˜ ì†Œí†µì— ëŠ¥ìˆ™í•©ë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-blue-400 font-semibold">ì†Œí†µë ¥</span>
                    <span className="text-white font-bold">88%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-blue-400 h-2 rounded-full" style={{ width: '88%' }}></div>
                  </div>
                </div>
              </div>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div className="bg-purple-500/20 rounded-xl p-6 border border-purple-400/30">
                <h3 className="text-xl font-bold text-purple-400 mb-4">ì´ë§ˆì™€ í„±</h3>
                <p className="text-white leading-relaxed">ë„“ì€ ì´ë§ˆëŠ” ì§€ì  ëŠ¥ë ¥ê³¼ ì°½ì˜ì„±ì„, ê°ì§„ í„±ì€ ì˜ì§€ë ¥ê³¼ ê²°ë‹¨ë ¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ê³  ëª©í‘œ ë‹¬ì„±ì— ì§‘ì¤‘í•˜ëŠ” ì„±í–¥ì…ë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-purple-400 font-semibold">ì§€ì  ëŠ¥ë ¥</span>
                    <span className="text-white font-bold">85%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-purple-400 h-2 rounded-full" style={{ width: '85%' }}></div>
                  </div>
                </div>
              </div>
              <div className="bg-orange-500/20 rounded-xl p-6 border border-orange-400/30">
                <h3 className="text-xl font-bold text-orange-400 mb-4">ì½”ì™€ ê·€</h3>
                <p className="text-white leading-relaxed">ì§ì„ ì ì¸ ì½”ëŠ” ì •ì§í•˜ê³  ì†”ì§í•œ ì„±ê²©ì„, ê·€ì˜ ìœ„ì¹˜ëŠ” ê· í˜• ì¡íŒ íŒë‹¨ë ¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê°ì •ì ì´ê¸°ë³´ë‹¤ëŠ” ì´ì„±ì ìœ¼ë¡œ ìƒí™©ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-orange-400 font-semibold">íŒë‹¨ë ¥</span>
                    <span className="text-white font-bold">90%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-orange-400 h-2 rounded-full" style={{ width: '90%' }}></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* ìƒëŒ€ë°© ì‚¬ì£¼ ë¶„ì„ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ğŸ”® {selectedUser.name}ë‹˜ì˜ ì‚¬ì£¼ ë¶„ì„</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div className="bg-red-500/20 rounded-xl p-6 border border-red-400/30">
                <h3 className="text-xl font-bold text-red-400 mb-4">ì¼ê°„ (æ—¥å¹²) - {selectedUser.name}ë‹˜ì˜ ë³¸ì„±</h3>
                <p className="text-white leading-relaxed">ì¼ê°„ì´ ê°•í•œ í¸ìœ¼ë¡œ ë…ë¦½ì ì´ê³  ìì£¼ì ì¸ ì„±ê²©ì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ë›°ì–´ë‚˜ë©°, ìì‹ ì˜ ì˜ê²¬ì„ ëª…í™•í•˜ê²Œ í‘œí˜„í•˜ëŠ” ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-red-400 font-semibold">ë…ë¦½ì„±</span>
                    <span className="text-white font-bold">87%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-red-400 h-2 rounded-full" style={{ width: '87%' }}></div>
                  </div>
                </div>
              </div>
              <div className="bg-yellow-500/20 rounded-xl p-6 border border-yellow-400/30">
                <h3 className="text-xl font-bold text-yellow-400 mb-4">ì˜¤í–‰ ê· í˜•</h3>
                <p className="text-white leading-relaxed">ëª©(æœ¨)ê³¼ í™”(ç«)ì˜ ê¸°ìš´ì´ ê°•í•˜ì—¬ ì°½ì˜ì ì´ê³  ì—´ì •ì ì¸ ì„±ê²©ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì¶”êµ¬í•˜ë©°, ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ë„ì „ ì •ì‹ ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
                <div className="mt-4">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-yellow-400 font-semibold">ì°½ì˜ì„±</span>
                    <span className="text-white font-bold">91%</span>
                  </div>
                  <div className="w-full bg-white/20 rounded-full h-2">
                    <div className="bg-yellow-400 h-2 rounded-full" style={{ width: '91%' }}></div>
                  </div>
                </div>
              </div>
            </div>
            <div className="bg-indigo-500/20 rounded-xl p-6 border border-indigo-400/30">
              <h3 className="text-xl font-bold text-indigo-400 mb-4">ëŒ€ìš´ê³¼ ì„¸ìš´</h3>
              <p className="text-white leading-relaxed">í˜„ì¬ 20ëŒ€ í›„ë°˜~30ëŒ€ ì´ˆë°˜ìœ¼ë¡œ ì¸ì—°ê³¼ ê´€ê³„ì— ëŒ€í•œ ê´€ì‹¬ì´ ë†’ì•„ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. íŠ¹íˆ ì˜¬í•´ëŠ” ìƒˆë¡œìš´ ë§Œë‚¨ê³¼ ê´€ê³„ í˜•ì„±ì— ì¢‹ì€ ê¸°ìš´ì´ ìˆìœ¼ë©°, ì§„ì •í•œ ì‚¬ë‘ì„ ì°¾ì„ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ë§ìŠµë‹ˆë‹¤.</p>
              <div className="mt-4">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-indigo-400 font-semibold">ì¸ì—°ìš´</span>
                  <span className="text-white font-bold">89%</span>
                </div>
                <div className="w-full bg-white/20 rounded-full h-2">
                  <div className="bg-indigo-400 h-2 rounded-full" style={{ width: '89%' }}></div>
                </div>
              </div>
            </div>
          </div>

          {/* ë‚˜ì™€ì˜ ê¶í•© ë¶„ì„ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ğŸ’• ë‚˜ì™€ì˜ ê¶í•© ë¶„ì„</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div className="bg-pink-500/20 rounded-xl p-6 border border-pink-400/30">
                <h3 className="text-xl font-bold text-pink-400 mb-4">ì „ì²´ ê¶í•©ë„</h3>
                <div className="text-center">
                  <div className="text-6xl font-bold text-pink-400 mb-4">{selectedUser.totalCompatibility}%</div>
                  <p className="text-white text-lg">ë§¤ìš° ì¢‹ì€ ê¶í•©ì…ë‹ˆë‹¤!</p>
                  <p className="text-gray-300 mt-2">ì„œë¡œë¥¼ ì´í•´í•˜ê³  ë³´ì™„í•˜ëŠ” ê´€ê³„ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
              </div>
              <div className="bg-cyan-500/20 rounded-xl p-6 border border-cyan-400/30">
                <h3 className="text-xl font-bold text-cyan-400 mb-4">ê¶í•© ìœ í˜•</h3>
                <div className="space-y-3">
                  <div className="flex items-center justify-between">
                    <span className="text-white">ê´€ìƒ ê¶í•©</span>
                    <span className="text-cyan-400 font-bold">85%</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-white">ì‚¬ì£¼ ê¶í•©</span>
                    <span className="text-cyan-400 font-bold">78%</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-white">ì„±ê²© ê¶í•©</span>
                    <span className="text-cyan-400 font-bold">82%</span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span className="text-white">ê°€ì¹˜ê´€ ê¶í•©</span>
                    <span className="text-cyan-400 font-bold">88%</span>
                  </div>
                </div>
              </div>
            </div>
            
            {/* ìƒì„¸ ê¶í•© ë¶„ì„ */}
            <div className="space-y-6">
              <div className="bg-gradient-to-r from-green-500/20 to-blue-500/20 rounded-xl p-6 border border-green-400/30">
                <h3 className="text-xl font-bold text-green-400 mb-4">ğŸ¯ ê¶í•©ì˜ ì¥ì </h3>
                <ul className="space-y-2 text-white">
                  <li className="flex items-start gap-2">
                    <span className="text-green-400 mt-1">âœ“</span>
                    <span>ì„œë¡œì˜ ê°•ì ì„ ì¸ì •í•˜ê³  ë³´ì™„í•˜ëŠ” ê´€ê³„</span>
          </li>
                  <li className="flex items-start gap-2">
                    <span className="text-green-400 mt-1">âœ“</span>
                    <span>ëŒ€í™”ê°€ ì˜ í†µí•˜ê³  ì´í•´ê°€ ë¹ ë¦„</span>
          </li>
                  <li className="flex items-start gap-2">
                    <span className="text-green-400 mt-1">âœ“</span>
                    <span>í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” ë™ë°˜ì ê´€ê³„</span>
                  </li>
                  <li className="flex items-start gap-2">
                    <span className="text-green-400 mt-1">âœ“</span>
                    <span>ê°ì •ì  ì•ˆì •ê°ì„ ì œê³µí•˜ëŠ” ê´€ê³„</span>
                  </li>
                </ul>
              </div>
              
              <div className="bg-gradient-to-r from-orange-500/20 to-red-500/20 rounded-xl p-6 border border-orange-400/30">
                <h3 className="text-xl font-bold text-orange-400 mb-4">âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
                <ul className="space-y-2 text-white">
                  <li className="flex items-start gap-2">
                    <span className="text-orange-400 mt-1">!</span>
                    <span>ì„œë¡œì˜ ë…ë¦½ì„±ì„ ì¡´ì¤‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”</span>
                  </li>
                  <li className="flex items-start gap-2">
                    <span className="text-orange-400 mt-1">!</span>
                    <span>ì˜ê²¬ ì°¨ì´ê°€ ìˆì„ ë•ŒëŠ” ëŒ€í™”ë¡œ í•´ê²°</span>
                  </li>
                  <li className="flex items-start gap-2">
                    <span className="text-orange-400 mt-1">!</span>
                    <span>ì„œë¡œì˜ ê³µê°„ê³¼ ì‹œê°„ì„ ì¸ì •í•˜ê¸°</span>
                  </li>
                </ul>
              </div>
              
              <div className="bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl p-6 border border-purple-400/30">
                <h3 className="text-xl font-bold text-purple-400 mb-4">ğŸ’¡ ê´€ê³„ ë°œì „ ë°©í–¥</h3>
                <p className="text-white leading-relaxed mb-4">
                  ë‘ ì‚¬ëŒì€ ì„œë¡œë¥¼ ì´í•´í•˜ê³  ë³´ì™„í•˜ëŠ” ê´€ê³„ë¡œ ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                  {selectedUser.name}ë‹˜ì˜ ì°½ì˜ì„±ê³¼ ì§ê´€ë ¥ì€ ë‹¹ì‹ ì˜ ì•ˆì •ì„±ê³¼ ê· í˜•ê°ê³¼ ì˜ ë§ìœ¼ë©°, 
                  í•¨ê»˜í•˜ë©´ ë” í° ì‹œë„ˆì§€ë¥¼ ë‚¼ ìˆ˜ ìˆëŠ” ì¡°í•©ì…ë‹ˆë‹¤.
                </p>
                <div className="text-center">
                  <div className="inline-block bg-purple-500 text-white px-6 py-2 rounded-full font-semibold">
                    ğŸš€ ê´€ê³„ ë°œì „ ê°€ëŠ¥ì„±: ë§¤ìš° ë†’ìŒ
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    )
  }

  // ë©”ì‹œì§€ í˜ì´ì§€ (dm-chat)
  if (currentStep === "dm-chat" && selectedUser) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col">
        {/* í—¤ë” */}
        <div className="bg-white/10 backdrop-blur-sm border-b border-white/20 p-4">
          <div className="flex items-center gap-4 max-w-4xl mx-auto">
            <button
              onClick={() => setCurrentStep("other-profile")}
              className="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-full font-semibold transition-colors border border-white/30"
            >
              â† ë’¤ë¡œ ê°€ê¸°
            </button>
            <div className="flex items-center gap-3">
              <div className="w-12 h-12 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-2xl">
                ğŸ‘¤
              </div>
              <div>
                <h2 className="text-xl font-bold text-amber-400">{selectedUser.name}</h2>
                <p className="text-sm text-gray-300">ê¶í•©ë„ {selectedUser.totalCompatibility}%</p>
              </div>
            </div>
          </div>
        </div>

        {/* ë©”ì‹œì§€ ì˜ì—­ */}
        <div className="flex-1 overflow-y-auto p-4 max-w-4xl mx-auto w-full">
          <div className="space-y-4">
            {messages.map((message) => (
              <div
                key={message.id}
                className={`flex ${message.sender === "me" ? "justify-end" : "justify-start"}`}
              >
                <div
                  className={`max-w-xs md:max-w-md lg:max-w-lg px-4 py-3 rounded-2xl ${
                    message.sender === "me"
                      ? "bg-amber-400 text-black rounded-br-md"
                      : "bg-white/20 text-white rounded-bl-md"
                  }`}
                >
                  <p className="text-sm leading-relaxed">{message.text}</p>
                  <div className={`flex items-center justify-between mt-2 text-xs ${
                    message.sender === "me" ? "text-black/70" : "text-gray-300"
                  }`}>
                    <span>
                      {message.timestamp.toLocaleTimeString("ko-KR", {
                        hour: "2-digit",
                        minute: "2-digit",
                      })}
                    </span>
                    {message.sender === "me" && (
                      <span className="flex items-center gap-1">
                        {message.isRead ? "ì½ìŒ" : "ì „ì†¡ë¨"}
                      </span>
                    )}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* ë©”ì‹œì§€ ì…ë ¥ ì˜ì—­ */}
        <div className="bg-white/10 backdrop-blur-sm border-t border-white/20 p-4">
          <div className="max-w-4xl mx-auto">
            <div className="flex gap-3">
              <div className="flex-1 relative">
                <input
                  type="text"
                  value={newMessage}
                  onChange={(e) => setNewMessage(e.target.value)}
                  onKeyPress={(e) => e.key === "Enter" && sendMessage()}
                  placeholder={`${selectedUser.name}ë‹˜ì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ì„¸ìš”...`}
                  className="w-full px-4 py-3 rounded-full bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none placeholder-gray-400"
                />
                <button
                  onClick={sendMessage}
                  disabled={!newMessage.trim()}
                  className="absolute right-2 top-1/2 transform -translate-y-1/2 bg-amber-400 hover:bg-amber-500 disabled:bg-gray-500 text-black px-4 py-2 rounded-full font-semibold transition-colors disabled:cursor-not-allowed"
                >
                  ì „ì†¡
                </button>
        </div>
            </div>
            
            {/* ë¹ ë¥¸ ë©”ì‹œì§€ ë²„íŠ¼ë“¤ */}
            <div className="flex flex-wrap gap-2 mt-3">
              {[
                "ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜Š",
                "í”„ë¡œí•„ ë³´ê³  ì—°ë½ë“œë ¸ì–´ìš”",
                "ì‹œê°„ ë˜ì‹¤ ë•Œ ëŒ€í™”í•´ìš”",
                "ê¶í•© ë¶„ì„ì´ ì‹ ê¸°í–ˆì–´ìš”",
                "ì»¤í”¼ í•œ ì” ì–´ë– ì„¸ìš”? â˜•"
              ].map((quickMessage, index) => (
                <button
                  key={index}
                  onClick={() => {
                    setNewMessage(quickMessage)
                    // ìë™ìœ¼ë¡œ ì „ì†¡
                    setTimeout(() => {
                      setNewMessage(quickMessage)
                      sendMessage()
                    }, 100)
                  }}
                  className="bg-white/20 hover:bg-white/30 text-white px-3 py-2 rounded-full text-sm font-medium transition-colors border border-white/30"
                >
                  {quickMessage}
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    )
  }

  // ë‚˜ì˜ í”„ë¡œí•„ í˜ì´ì§€
  if (currentStep === "my-profile") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        <div className="max-w-4xl mx-auto">
          {/* í—¤ë” */}
          <div className="text-center mb-8">
            <h1 className="text-4xl font-bold text-amber-400">ë‚´ í”„ë¡œí•„</h1>
            <p className="text-xl text-white mt-2">í”„ë¡œí•„ì„ ê´€ë¦¬í•˜ê³  ì—°ì• ìš´ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
          </div>

          {/* í”„ë¡œí•„ ìˆ˜ì • ì„¹ì…˜ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">í”„ë¡œí•„ ì •ë³´ ìˆ˜ì •</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ë‹‰ë„¤ì„</label>
                <input
                  type="text"
                  value={profileData.nickname}
                  onChange={(e) => handleInputChange("nickname", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ì„±ë³„</label>
                <select
                  value={profileData.gender}
                  onChange={(e) => handleInputChange("gender", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                >
                  <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                  <option value="male">ë‚¨ì„±</option>
                  <option value="female">ì—¬ì„±</option>
                </select>
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ìƒë…„ì›”ì¼</label>
                <input
                  type="date"
                  value={profileData.birthDate}
                  onChange={(e) => handleInputChange("birthDate", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                />
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ì§€ì—­</label>
                <input
                  type="text"
                  value={profileData.region}
                  onChange={(e) => handleInputChange("region", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ì§€ì—­ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">í‚¤</label>
                <input
                  type="text"
                  value={profileData.height}
                  onChange={(e) => handleInputChange("height", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                />
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ì²´í˜•</label>
                <select
                  value={profileData.bodyType}
                  onChange={(e) => handleInputChange("bodyType", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                >
                  <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                  <option value="slim">ë§ˆë¥¸ í¸</option>
                  <option value="normal">ë³´í†µ</option>
                  <option value="chubby">í†µí†µí•œ í¸</option>
                  <option value="muscular">ê·¼ìœ¡ì§ˆ</option>
                </select>
              </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">ì§ì—…</label>
                <input
                  type="text"
                  value={profileData.job}
                  onChange={(e) => handleInputChange("job", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                  placeholder="ì§ì—…ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
    </div>
              <div>
                <label className="block text-amber-400 font-semibold mb-2">í•™ë ¥</label>
                <select
                  value={profileData.education}
                  onChange={(e) => handleInputChange("education", e.target.value)}
                  className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none"
                >
                  <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                  <option value="high-school">ê³ ë“±í•™êµ</option>
                  <option value="college">ëŒ€í•™êµ</option>
                  <option value="graduate">ëŒ€í•™ì›</option>
                  <option value="other">ê¸°íƒ€</option>
                </select>
              </div>
            </div>
            <div className="mt-6">
              <label className="block text-amber-400 font-semibold mb-2">ìê¸°ì†Œê°œ</label>
              <textarea
                value={profileData.introduction}
                                  onChange={(e) => handleInputChange("introduction", e.target.value)}
                rows={4}
                className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-amber-400 focus:outline-none resize-none"
                placeholder="ìì‹ ì„ ì†Œê°œí•´ì£¼ì„¸ìš”"
              />
            </div>
            <div className="mt-6">
              <label className="block text-amber-400 font-semibold mb-2">ì´ìƒí˜• í‚¤ì›Œë“œ</label>
              <div className="flex flex-wrap gap-2">
                {profileData.idealKeywords.map((keyword, index) => (
                  <span key={index} className="bg-amber-400/20 text-amber-400 px-3 py-1 rounded-full text-sm border border-amber-400 flex items-center gap-2">
                    {keyword}
                    <button
                      onClick={() => {
                        const newKeywords = profileData.idealKeywords.filter((_, i) => i !== index)
                        handleInputChange("idealKeywords", newKeywords)
                      }}
                      className="text-amber-400 hover:text-amber-300 text-lg"
                    >
                      Ã—
                    </button>
                  </span>
                ))}
                <input
                  type="text"
                  placeholder="í‚¤ì›Œë“œ ì¶”ê°€"
                  onKeyPress={(e) => {
                    if (e.key === "Enter" && e.currentTarget.value.trim()) {
                      const newKeywords = [...profileData.idealKeywords, e.currentTarget.value.trim()]
                      handleInputChange("idealKeywords", newKeywords)
                      e.currentTarget.value = ""
                    }
                  }}
                  className="bg-white/20 text-white px-3 py-1 rounded-full text-sm border border-white/30 focus:border-amber-400 focus:outline-none placeholder-gray-400"
                />
              </div>
            </div>
            <div className="flex justify-center mt-8">
              <button
                onClick={() => {
                  // í”„ë¡œí•„ ì €ì¥ ë¡œì§
                  alert("í”„ë¡œí•„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!")
                }}
                className="bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors"
              >
                í”„ë¡œí•„ ì €ì¥
              </button>
            </div>
          </div>

          {/* ì¼ë³„ ì—°ì• ìš´ ë¶„ì„ */}
          <div className="bg-white/10 rounded-2xl p-8 mb-8">
            <h2 className="text-2xl font-bold text-amber-400 mb-6">ğŸ”® ì˜¤ëŠ˜ì˜ ì—°ì• ìš´</h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div className="bg-green-500/20 rounded-xl p-6 border border-green-400/30">
                <h3 className="text-xl font-bold text-green-400 mb-4">ê´€ìƒ ê¸°ë°˜ ì—°ì• ìš´</h3>
                <div className="text-center mb-4">
                  <div className="text-4xl font-bold text-green-400 mb-2">85%</div>
                  <div className="w-full bg-white/20 rounded-full h-3">
                    <div className="bg-green-400 h-3 rounded-full" style={{ width: '85%' }}></div>
                  </div>
                </div>
                <p className="text-white leading-relaxed mb-4">
                  ì˜¤ëŠ˜ì€ ëˆˆë¹›ì´ íŠ¹íˆ ë§¤ë ¥ì ìœ¼ë¡œ ë³´ì´ëŠ” ë‚ ì…ë‹ˆë‹¤. 
                  í° ëˆˆê³¼ ê¸´ ì†ëˆˆì¹ì˜ ì—ë„ˆì§€ê°€ ìµœê³ ì¡°ì— ë‹¬í•´ ìƒëŒ€ë°©ì˜ ë§ˆìŒì„ ì‰½ê²Œ ì‚¬ë¡œì¡ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
                <div className="space-y-2 text-sm text-gray-300">
                  <p>âœ“ ìƒˆë¡œìš´ ë§Œë‚¨ì˜ ê¸°íšŒê°€ ë§ìŒ</p>
                  <p>âœ“ ê¸°ì¡´ ê´€ê³„ì—ì„œ ê¹Šì´ ìˆëŠ” ëŒ€í™” ê°€ëŠ¥</p>
                  <p>âœ“ ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ ìƒëŒ€ë°©ì˜ ë§ˆìŒì„ ì˜ ì½ìŒ</p>
                </div>
              </div>
              <div className="bg-blue-500/20 rounded-xl p-6 border border-blue-400/30">
                <h3 className="text-xl font-bold text-blue-400 mb-4">ì‚¬ì£¼ ê¸°ë°˜ ì—°ì• ìš´</h3>
                <div className="text-center mb-4">
                  <div className="text-4xl font-bold text-blue-400 mb-2">78%</div>
                  <div className="w-full bg-white/20 rounded-full h-3">
                    <div className="bg-blue-400 h-3 rounded-full" style={{ width: '78%' }}></div>
                  </div>
                </div>
                <p className="text-white leading-relaxed mb-4">
                  ëª©(æœ¨)ê³¼ í™”(ç«)ì˜ ê¸°ìš´ì´ ì¡°í™”ë¥¼ ì´ë£¨ì–´ ì°½ì˜ì ì´ê³  ì—´ì •ì ì¸ ë§Œë‚¨ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. 
                  íŠ¹íˆ ì˜¤í›„ 2ì‹œ~4ì‹œ ì‚¬ì´ì— ì¢‹ì€ ê¸°ìš´ì´ ì§‘ì¤‘ë©ë‹ˆë‹¤.
                </p>
                <div className="space-y-2 text-sm text-gray-300">
                  <p>âœ“ ì°½ì˜ì ì¸ ë°ì´íŠ¸ ì•„ì´ë””ì–´ ì œì•ˆ</p>
                  <p>âœ“ ì—´ì •ì ì¸ ê°ì • í‘œí˜„ìœ¼ë¡œ ê´€ê³„ ë°œì „</p>
                  <p>âœ“ ìƒˆë¡œìš´ ì·¨ë¯¸ë‚˜ í™œë™ì„ í†µí•œ ë§Œë‚¨</p>
                </div>
              </div>
            </div>
            
            {/* ìƒì„¸ ìš´ì„¸ ë¶„ì„ */}
            <div className="bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-xl p-6 border border-purple-400/30">
              <h3 className="text-xl font-bold text-purple-400 mb-4">ğŸ’• ì˜¤ëŠ˜ì˜ ì—°ì•  ì¡°ì–¸</h3>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div className="text-center">
                  <div className="text-2xl mb-2">ğŸ•</div>
                  <p className="text-white font-semibold">ìµœì  ì‹œê°„</p>
                  <p className="text-gray-300 text-sm">ì˜¤í›„ 2ì‹œ~4ì‹œ</p>
                </div>
                <div className="text-center">
                  <div className="text-2xl mb-2">ğŸ“</div>
                  <p className="text-white font-semibold">ì¶”ì²œ ì¥ì†Œ</p>
                  <p className="text-gray-300 text-sm">ì¹´í˜, ê³µì›, ë¬¸í™”ê³µê°„</p>
                </div>
                <div className="text-center">
                  <div className="text-2xl mb-2">ğŸ¨</div>
                  <p className="text-white font-semibold">í™œë™ ì¶”ì²œ</p>
                  <p className="text-gray-300 text-sm">ì°½ì˜ì  í™œë™, ëŒ€í™”</p>
                </div>
              </div>
              <p className="text-white leading-relaxed text-center">
                ì˜¤ëŠ˜ì€ ê´€ìƒê³¼ ì‚¬ì£¼ê°€ ëª¨ë‘ ì¢‹ì€ ê¸°ìš´ì„ ë³´ì´ê³  ìˆì–´ ì—°ì• ì— ë§¤ìš° ìœ ë¦¬í•œ ë‚ ì…ë‹ˆë‹¤. 
                ì ê·¹ì ìœ¼ë¡œ ë§Œë‚¨ì„ ì¶”êµ¬í•˜ê³ , ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¡œ ìƒëŒ€ë°©ì„ ë†€ë¼ê²Œ í•´ë³´ì„¸ìš”!
              </p>
            </div>
          </div>

          {/* ì•¡ì…˜ ë²„íŠ¼ */}
          <div className="flex justify-center">
            <button
              onClick={() => setCurrentStep("home")}
              className="bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors"
            >
              ë§¤ì¹­ ëª©ë¡ìœ¼ë¡œ
            </button>
          </div>
        </div>
      </div>
    )
  }

  // í†µí•© ë¶„ì„ ë‹¨ê³„ë³„ í™”ë©´ ë Œë”ë§
  if (integratedAnalysisStep === "input") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        {/* ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ */}
        {(isLoggedIn || localUser) && (
          <div className="absolute top-6 right-6 flex items-center gap-4 z-10">
            <span className="text-amber-400">
              {localUser?.nickname || 'ì‚¬ìš©ì'}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!
            </span>
            <button
              onClick={handleLocalLogout}
              className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition-colors"
            >
              ë¡œê·¸ì•„ì›ƒ
            </button>
          </div>
        )}
        
        <div className="max-w-4xl mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8 text-center">ê´€ìƒê³¼ ì‚¬ì£¼ í†µí•© ë¶„ì„</h1>
          <p className="text-xl text-white mb-8 text-center">ì‚¬ì§„ê³¼ ì‚¬ì£¼ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤</p>
          
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {/* ì™¼ìª½: ì‚¬ì§„ ì—…ë¡œë“œ */}
            <div className="bg-white/10 rounded-2xl p-6">
              <h2 className="text-2xl font-bold text-amber-400 mb-4">ğŸ“¸ ê´€ìƒ ë¶„ì„ìš© ì‚¬ì§„</h2>
              <p className="text-gray-300 mb-4">ì •ë©´ ì–¼êµ´ ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”</p>
              
              <div className="text-center">
                {uploadedImage ? (
                  <div className="mb-4">
                    <img 
                      src={uploadedImage} 
                      alt="ì—…ë¡œë“œëœ ì‚¬ì§„" 
                      className="w-32 h-32 rounded-full object-cover border-4 border-amber-400 mx-auto"
                    />
                    <button
                      onClick={() => setUploadedImage(null)}
                      className="text-red-400 text-sm mt-2 hover:text-red-300"
                    >
                      ì‚¬ì§„ ë³€ê²½í•˜ê¸°
                    </button>
                  </div>
                ) : (
                  <div className="border-2 border-dashed border-amber-400/50 rounded-lg p-8 mb-4">
                    <input
                      type="file"
                      accept="image/*"
                      onChange={handlePhotoUpload}
                      className="hidden"
                      id="photo-upload"
                    />
                    <label
                      htmlFor="photo-upload"
                      className="bg-amber-400 hover:bg-amber-500 text-black px-6 py-3 rounded-full text-lg font-semibold transition-colors cursor-pointer inline-block"
                    >
                      ì‚¬ì§„ ì„ íƒí•˜ê¸°
                    </label>
                  </div>
                )}
              </div>
            </div>

            {/* ì˜¤ë¥¸ìª½: ì‚¬ì£¼ ì •ë³´ ì…ë ¥ */}
            <div className="bg-white/10 rounded-2xl p-6">
              <h2 className="text-2xl font-bold text-blue-400 mb-4">ğŸ”® ì‚¬ì£¼ ë¶„ì„ ì •ë³´</h2>
              <p className="text-gray-300 mb-4">ì„±ë³„, ìƒë…„ì›”ì¼, ì¶œìƒ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
              
              <div className="space-y-4">
                {/* ì„±ë³„ ì„ íƒ */}
                <div>
                  <label className="block text-white mb-2">ì„±ë³„ *</label>
                  <div className="flex gap-3">
                    <button 
                      type="button"
                      onClick={() => setProfileData(prev => ({ ...prev, gender: 'ë‚¨ì„±' }))}
                      className={`flex-1 px-4 py-3 rounded-lg transition-all border-2 ${
                        profileData.gender === 'ë‚¨ì„±' 
                          ? 'bg-blue-500 text-white border-blue-400 shadow-lg' 
                          : 'bg-white/20 text-gray-300 border-white/30 hover:bg-white/30'
                      }`}
                    >
                      ğŸ‘¨ ë‚¨ì„±
                    </button>
                    <button 
                      type="button"
                      onClick={() => setProfileData(prev => ({ ...prev, gender: 'ì—¬ì„±' }))}
                      className={`flex-1 px-4 py-3 rounded-lg transition-all border-2 ${
                        profileData.gender === 'ì—¬ì„±' 
                          ? 'bg-pink-500 text-white border-pink-400 shadow-lg' 
                          : 'bg-white/20 text-gray-300 border-white/30 hover:bg-white/30'
                      }`}
                    >
                      ğŸ‘© ì—¬ì„±
                    </button>
                  </div>
                </div>
                <div>
                  <label className="block text-white mb-2">ìƒë…„ì›”ì¼ *</label>
                  <input
                    type="date"
                    value={sajuData.birthDate}
                    onChange={(e) => handleSajuInputChange("birthDate", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-blue-400 focus:outline-none"
                  />
                </div>
                
                <div>
                  <label className="block text-white mb-2">ì¶œìƒ ì‹œê°„</label>
                  <select
                    value={sajuData.birthTime}
                    onChange={(e) => handleSajuInputChange("birthTime", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-blue-400 focus:outline-none"
                  >
                    <option value="">ì—†ìŒ</option>
                    <option value="00:00">ìì‹œ (23:00-01:00)</option>
                    <option value="02:00">ì¶•ì‹œ (01:00-03:00)</option>
                    <option value="04:00">ì¸ì‹œ (03:00-05:00)</option>
                    <option value="06:00">ë¬˜ì‹œ (05:00-07:00)</option>
                    <option value="08:00">ì§„ì‹œ (07:00-09:00)</option>
                    <option value="10:00">ì‚¬ì‹œ (09:00-11:00)</option>
                    <option value="12:00">ì˜¤ì‹œ (11:00-13:00)</option>
                    <option value="14:00">ë¯¸ì‹œ (13:00-15:00)</option>
                    <option value="16:00">ì‹ ì‹œ (15:00-17:00)</option>
                    <option value="18:00">ìœ ì‹œ (17:00-19:00)</option>
                    <option value="20:00">ìˆ ì‹œ (19:00-21:00)</option>
                    <option value="22:00">í•´ì‹œ (21:00-23:00)</option>
                  </select>
                </div>

                <div>
                  <label className="block text-white mb-2">íƒœì–´ë‚œ ì§€ì—­</label>
                  <select
                    value={sajuData.birthPlace}
                    onChange={(e) => handleSajuInputChange("birthPlace", e.target.value)}
                    className="w-full px-4 py-3 rounded-lg bg-white/20 text-white border border-white/30 focus:border-blue-400 focus:outline-none"
                  >
                    <option value="">ì§€ì—­ ì„ íƒ</option>
                    <option value="ì„œìš¸">ì„œìš¸</option>
                    <option value="ê²½ê¸°">ê²½ê¸°</option>
                    <option value="ì¸ì²œ">ì¸ì²œ</option>
                    <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                    <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
                    <option value="ê´‘ì£¼">ê´‘ì£¼</option>
                    <option value="ëŒ€ì „">ëŒ€ì „</option>
                    <option value="ìš¸ì‚°">ìš¸ì‚°</option>
                    <option value="ê°•ì›">ê°•ì›</option>
                    <option value="ì¶©ë¶">ì¶©ë¶</option>
                    <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
                    <option value="ì „ë¶">ì „ë¶</option>
                    <option value="ì „ë‚¨">ì „ë‚¨</option>
                    <option value="ê²½ë¶">ê²½ë¶</option>
                    <option value="ê²½ë‚¨">ê²½ë‚¨</option>
                    <option value="ì œì£¼">ì œì£¼</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          {/* í†µí•© ë¶„ì„ ì‹œì‘ ë²„íŠ¼ */}
          <div className="text-center mt-8">
            <button
              onClick={startIntegratedAnalysis}
              disabled={!uploadedImage || !sajuData.birthDate || !profileData.gender}
              className={`px-12 py-4 rounded-full text-xl font-bold transition-colors ${
                uploadedImage && sajuData.birthDate && profileData.gender
                  ? 'bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 text-black'
                  : 'bg-gray-500 text-gray-300 cursor-not-allowed'
              }`}
            >
              ğŸš€ AI í†µí•© ë¶„ì„ ì‹œì‘í•˜ê¸°
            </button>
            
            {(!uploadedImage || !sajuData.birthDate || !profileData.gender) && (
              <p className="text-gray-400 text-sm mt-2">
                {!uploadedImage && !sajuData.birthDate && !profileData.gender ? 'ì‚¬ì§„, ì„±ë³„, ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”' :
                 !uploadedImage ? 'ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”' : 
                 !profileData.gender ? 'ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”' : 'ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”'}
              </p>
            )}
          </div>
        </div>
      </div>
    )
  }



  if (integratedAnalysisStep === "analyzing") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex flex-col items-center justify-center p-6">
        <div className="text-center max-w-2xl mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8">ê´€ìƒê³¼ ì‚¬ì£¼ í†µí•© ë¶„ì„ ì¤‘</h1>
          <div className="bg-white/10 rounded-2xl p-8">
            <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-amber-400 mx-auto mb-4"></div>
            <p className="text-xl text-white">AIê°€ ê´€ìƒê³¼ ì‚¬ì£¼ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤</p>
          </div>
        </div>
      </div>
    )
  }

  if (integratedAnalysisStep === "result") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        {/* ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ */}
        {(isLoggedIn || localUser) && (
          <div className="absolute top-6 right-6 flex items-center gap-4 z-10">
            <span className="text-amber-400">
              {localUser?.nickname || 'ì‚¬ìš©ì'}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!
            </span>
            <button
              onClick={handleLocalLogout}
              className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition-colors"
            >
              ë¡œê·¸ì•„ì›ƒ
            </button>
          </div>
        )}
        
        <div className="max-w-4xl mx-auto">
          {/* ìƒë‹¨ ìš”ì•½ ì¹´ë“œ ì˜ì—­ */}
          <div className="bg-white/10 rounded-3xl p-8 mb-8 text-center">
            <div className="flex items-center justify-center mb-6">
              {uploadedImage && (
                <img 
                  src={uploadedImage} 
                  alt="í”„ë¡œí•„" 
                  className="w-24 h-24 rounded-full object-cover border-4 border-amber-400"
                />
              )}
            </div>
            <h1 className="text-3xl font-bold text-amber-400 mb-4">{profileData.nickname || "ì‚¬ìš©ì"}</h1>
            <div className="text-gray-300 mb-4">
              {profileData.gender === "male" ? "ë‚¨ì„±" : profileData.gender === "female" ? "ì—¬ì„±" : ""} â€¢ {profileData.birthDate}
            </div>
            
            {/* ê´€ìƒ í‚¤ì›Œë“œ ë°°ì§€ë“¤ */}
            <div className="flex flex-wrap justify-center gap-2 mb-4">
              {faceReadingResults.slice(0, 5).map((result, index) => (
                <span key={index} className="bg-green-500/20 text-green-400 px-3 py-1 rounded-full text-sm border border-green-400">
                  {result.keyword}
                </span>
              ))}
            </div>
            {/* ì‚¬ì£¼ í‚¤ì›Œë“œ ë°°ì§€ë“¤ */}
            <div className="flex flex-wrap justify-center gap-2">
              {sajuResults.slice(0, 5).map((result, index) => (
                <span key={index} className="bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-sm border border-blue-400">
                  {result.keyword}
                </span>
              ))}
            </div>
          </div>

          {/* ê°ì„±ì  ì—°ì•  ë¦¬í¬íŠ¸ */}
          <div className="bg-gradient-to-br from-pink-500/10 via-purple-500/10 to-blue-500/10 border border-pink-400/30 rounded-3xl p-8 mb-8">
            <div className="text-center mb-8">
              <h2 className="text-3xl font-bold text-amber-400 mb-2">ğŸ’• ì—°ì•  ë¦¬í¬íŠ¸</h2>
              <p className="text-gray-400 italic">ë‹¹ì‹ ë§Œì„ ìœ„í•œ íŠ¹ë³„í•œ ì´ì•¼ê¸°</p>
            </div>
            
            <div className="text-lg text-white leading-relaxed">
              {faceReadingResults && faceReadingResults.length > 0 && sajuResults && sajuResults.length > 0 ? (
                <div className="space-y-8">
                  {/* ë©”ì¸ ìŠ¤í† ë¦¬ */}
                  <div className="bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-2xl p-8 border border-pink-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">âœ¨</div>
                      <div>
                        <h3 className="text-xl font-semibold text-pink-300 mb-3">ë‹¹ì‹ ì˜ ì—°ì•  ì´ì•¼ê¸°</h3>
                        <div className="space-y-4 text-gray-200 leading-relaxed text-lg">
                          <p>
                            {faceReadingResults.find(r => r.description)?.description || 
                             `${profileData.nickname || "ë‹¹ì‹ "}ë‹˜ì˜ ì–¼êµ´ì„ ë³´ëŠ” ìˆœê°„, ë§ˆì¹˜ ë”°ëœ»í•œ ë´„ë‚  í–‡ì‚´ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  í¬ê·¼í•œ ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤. ë§ˆì¹˜ ì˜¤ë«ë™ì•ˆ ê¸°ë‹¤ë ¤ì˜¨ ë´„ë‚ ì²˜ëŸ¼, ë‹¹ì‹ ì˜ ì¡´ì¬ ìì²´ê°€ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ì•ˆë„ê°ê³¼ ë”°ëœ»í•¨ì„ ì„ ì‚¬í•˜ëŠ” ê²ƒ ê°™ì•„ìš”.`}
                          </p>
                          
                          <p>
                            ì—°ì•  ì´ˆë°˜ì—ëŠ” ë§ˆì¹˜ ì•„ì§ í”¼ì§€ ì•Šì€ ê½ƒë´‰ì˜¤ë¦¬ì²˜ëŸ¼ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë‹¤ê°€ê°€ì§€ë§Œ, í•œë²ˆ ë§ˆìŒì„ ì—´ë©´ ê·¸ ì•ˆì—ì„œ í”¼ì–´ë‚˜ëŠ” ì‚¬ë‘ì€ ì •ë§ ì•„ë¦„ë‹µìŠµë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ê°ì •ì— ê¹Šì´ ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì€ ë§ˆì¹˜ ìƒëŒ€ë°©ì˜ ë§ˆìŒì„ ì½ëŠ” ë§ˆë²•ì‚¬ ê°™ì•„ìš”. ìƒëŒ€ë°©ì´ ìŠ¬í”Œ ë•ŒëŠ” í•¨ê»˜ ìŠ¬í¼í•˜ê³ , ê¸°ì  ë•ŒëŠ” í•¨ê»˜ ê¸°ë»í•˜ë©°, ê·¸ ìˆœê°„ìˆœê°„ì„ ì§„ì‹¬ìœ¼ë¡œ ê³µìœ í•˜ë ¤ê³  ë…¸ë ¥í•˜ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤.
                          </p>
                          
                          <p>
                            ìœ„ê¸° ìƒí™©ì—ì„œëŠ” ë§ˆì¹˜ ì–´ë ¤ìš´ í¼ì¦ì„ í•¨ê»˜ ë§ì¶”ë ¤ëŠ” ê²ƒì²˜ëŸ¼, ìƒëŒ€ë°©ì„ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³  í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ì•„ê°€ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”. &ldquo;ìš°ë¦¬ í•¨ê»˜ í•´ê²°í•´ë³´ì&rdquo;ë¼ëŠ” ë§ˆìŒê°€ì§ìœ¼ë¡œ, ë¬¸ì œë¥¼ í”¼í•˜ì§€ ì•Šê³  ì •ë©´ìœ¼ë¡œ ë§ì„œëŠ” ìš©ê¸°ì™€ ì§€í˜œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                          </p>
                          
                          <p>
                            ë‹¹ì‹ ì˜ ì‚¬ë‘ì€ ë§ˆì¹˜ ê¹Šì€ ìˆ²ì†ì˜ ë§‘ì€ ìƒ˜ë¬¼ì²˜ëŸ¼, ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë”ìš± ê¹Šì–´ì§€ê³  ë§‘ì•„ì§‘ë‹ˆë‹¤. í•œë²ˆ ë§ˆìŒì„ ì—´ë©´ ê·¸ ì‚¬ë‘ì€ ë³€í•¨ì—†ì´ ì§€ì†ë˜ë©°, ìƒëŒ€ë°©ì—ê²Œ ì•ˆì „í•œ í•­êµ¬ê°€ ë˜ì–´ì£¼ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ì´ëŸ° ë‹¹ì‹ ì„ ë§Œë‚œ ì‚¬ëŒì€ ì •ë§ í–‰ìš´ì•„ë¼ê³  í•  ìˆ˜ ìˆì–´ìš”.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* ê´€ìƒ í•´ì„ - ì‹œê°ì  ë¶„ì„ */}
                  <div className="bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-2xl p-8 border border-green-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">ğŸ‘ï¸</div>
                      <div>
                        <h3 className="text-xl font-semibold text-green-300 mb-3">ë™ì–‘ ì² í•™ìœ¼ë¡œ ë³¸ ë‹¹ì‹ ì˜ ì–¼êµ´</h3>
                        <p className="text-gray-200 leading-relaxed text-lg mb-6">
                          {faceReadingResults.find(r => r.keyword.includes("ëˆˆ") || r.keyword.includes("ì…"))?.description || 
                           `ë‹¹ì‹ ì˜ ì–¼êµ´ì„ ë™ì–‘ ì² í•™ì˜ ì˜¤í–‰ ê´€ìƒí•™ìœ¼ë¡œ ë°”ë¼ë³´ë‹ˆ, ì •ë§ ì•„ë¦„ë‹¤ìš´ ìš´ëª…ì˜ ì§€ë„ê°€ í¼ì³ì ¸ ìˆì–´ìš”.`}
                        </p>
                        
                        {/* ì–¼êµ´ ë¶„ì„ ë‹¤ì´ì–´ê·¸ë¨ */}
                        <div className="bg-white/10 rounded-2xl p-6 mb-6">
                          <div className="text-center mb-6">
                            <div className="text-2xl font-bold text-green-300 mb-2">ë™ì–‘ ì² í•™ ê´€ìƒ ë¶„ì„</div>
                            <div className="text-sm text-gray-300">ë‹¹ì‹ ì˜ ì–¼êµ´ì— ë‹´ê¸´ ìš´ëª…ì˜ ì´ì•¼ê¸°</div>
                          </div>
                          

                          
                          {/* ì–¼êµ´ ê·¸ë¦¼ê³¼ ë¶„ì„ ì˜ì—­ */}
                          <div className="relative mx-auto w-64 h-80 mb-6">
                            {!profileData.gender ? (
                              /* ì„±ë³„ì´ ì„ íƒë˜ì§€ ì•Šì•˜ì„ ë•Œ ì•ˆë‚´ ë©”ì‹œì§€ */
                              <div className="absolute inset-0 flex items-center justify-center">
                                <div className="text-center">
                                  <div className="text-6xl mb-4">ğŸ‘¤</div>
                                  <p className="text-gray-400 text-sm">ì‚¬ì£¼ ì •ë³´ì—ì„œ ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                                </div>
                              </div>
                            ) : (
                              <>
                                {/* ì‹¤ì œ ì–¼êµ´ ì´ë¯¸ì§€ - ì œê³µí•´ì£¼ì‹  ì´ë¯¸ì§€ ê¸°ë°˜ */}
                                <div className="absolute inset-0 flex items-center justify-center">
                                  {profileData.gender === 'ë‚¨ì„±' ? (
                                    /* ë‚¨ì„± ì–¼êµ´ ì´ë¯¸ì§€ - ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ê¸°ë°˜ */
                                    <div className="relative w-full h-full">
                                      {/* ì œê³µí•´ì£¼ì‹  ë‚¨ì„± ì–¼êµ´ ì´ë¯¸ì§€ì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */}
                                      {/* ë°ì€ ë…¸ë€ìƒ‰ ë°°ê²½ì˜ ë§Œí™” ìŠ¤íƒ€ì¼ ì–¼êµ´ */}
                                      <div className="absolute inset-0 bg-yellow-300 rounded-[60%_40%_30%_70%/60%_30%_70%_40%] border-4 border-amber-400 shadow-lg"></div>
                                      
                                      {/* ì§™ì€ ê°ˆìƒ‰ ë¨¸ë¦¬ì¹´ë½ - ì˜†ìœ¼ë¡œ ë„˜ê²¨ì§„ ìŠ¤íƒ€ì¼ */}
                                      <div className="absolute -top-2 -left-2 -right-2 h-16 bg-gradient-to-b from-amber-800 via-amber-700 to-amber-600 rounded-[60%_40%_30%_70%/60%_30%_70%_40%] opacity-90"></div>
                                      
                                      {/* ë‘êº¼ìš´ ëˆˆì¹ - ìì—°ìŠ¤ëŸ¬ìš´ ì•„ì¹˜í˜• */}
                                      <div className="absolute top-20 left-8 w-8 h-2 bg-amber-800 rounded-full opacity-80"></div>
                                      <div className="absolute top-20 right-8 w-8 h-2 bg-amber-800 rounded-full opacity-80"></div>
                                      
                                      {/* ëˆˆ - ê²€ì€ìƒ‰ íƒ€ì›í˜•, ì •ë©´ ì‘ì‹œ */}
                                      <div className="absolute top-24 left-10 w-6 h-4 bg-black rounded-full opacity-80"></div>
                                      <div className="absolute top-24 right-10 w-6 h-4 bg-black rounded-full opacity-80"></div>
                                      
                                      {/* ì½” - ë¶€ë“œëŸ¬ìš´ ê³¡ì„ , ì½§ëŒ€ì™€ ì½§ë§ìš¸ ì—°ê²° */}
                                      <div className="absolute top-32 left-1/2 transform -translate-x-1/2 w-1 h-8 bg-amber-300 rounded-full"></div>
                                      
                                      {/* ì… - ì‚´ì§ ë¯¸ì†Œ, ì–‡ì€ ì…ìˆ  */}
                                      <div className="absolute top-44 left-1/2 transform -translate-x-1/2 w-8 h-3 bg-pink-300 rounded-full opacity-80"></div>
                                      
                                      {/* ê·€ - ê¹”ë”í•˜ê²Œ ë¶™ì–´ìˆëŠ” í˜•íƒœ */}
                                      <div className="absolute top-28 -left-1 w-3 h-8 bg-amber-200 rounded-full opacity-80"></div>
                                      <div className="absolute top-28 -right-1 w-3 h-8 bg-amber-200 rounded-full opacity-80"></div>
                                    </div>
                                  ) : (
                                    /* ì—¬ì„± ì–¼êµ´ ì´ë¯¸ì§€ - ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ ê¸°ë°˜ */
                                    <div className="relative w-full h-full">
                                      {/* ì œê³µí•´ì£¼ì‹  ì—¬ì„± ì–¼êµ´ ì´ë¯¸ì§€ì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */}
                                      {/* ë°ì€ ë² ì´ì§€ìƒ‰ ë°°ê²½ì˜ ë¶€ë“œëŸ¬ìš´ ì–¼êµ´ */}
                                      <div className="absolute inset-0 bg-gradient-to-b from-amber-50 via-amber-100 to-amber-200 rounded-[60%_40%_30%_70%/60%_30%_70%_40%] border-4 border-amber-300 shadow-lg"></div>
                                      
                                      {/* ê¸´ ê°ˆìƒ‰ ë¨¸ë¦¬ì¹´ë½ - ì¤‘ê°„ ê°ˆë¼ì§„ ìŠ¤íƒ€ì¼, ì–´ê¹¨ê¹Œì§€ */}
                                      <div className="absolute -top-4 -left-4 -right-4 h-20 bg-gradient-to-b from-amber-800 via-amber-700 to-amber-600 rounded-[60%_40%_30%_70%/60%_30%_70%_40%] opacity-90"></div>
                                      
                                      {/* ëˆˆ - ì•„ëª¬ë“œí˜•, ë” í° í¬ê¸° */}
                                      <div className="absolute top-26 left-10 w-7 h-4 bg-black rounded-full opacity-80"></div>
                                      <div className="absolute top-26 right-10 w-7 h-4 bg-black rounded-full opacity-80"></div>
                                      
                                      {/* ì½” - ì‘ê³  ì„¬ì„¸í•œ í˜•íƒœ */}
                                      <div className="absolute top-34 left-1/2 transform -translate-x-1/2 w-1 h-6 bg-pink-300 rounded-full"></div>
                                      
                                      {/* ì… - ë¶€ë“œëŸ¬ìš´ ë¯¸ì†Œ, ì‘ì€ í¬ê¸° */}
                                      <div className="absolute top-46 left-1/2 transform -translate-x-1/2 w-6 h-2 bg-pink-400 rounded-full opacity-80"></div>
                                      
                                      {/* ê·€ - ë¨¸ë¦¬ì¹´ë½ì— ë¶€ë¶„ì ìœ¼ë¡œ ê°€ë ¤ì§„ í˜•íƒœ */}
                                      <div className="absolute top-30 -left-1 w-2 h-6 bg-pink-200 rounded-full opacity-80"></div>
                                      <div className="absolute top-30 -right-1 w-2 h-6 bg-pink-200 rounded-full opacity-80"></div>
                                    </div>
                                  )}
                                </div>
                              </>
                            )}
                            
                            {/* ì´ë§ˆ (í™”ç«) - ì²œ(å¤©) */}
                            <div className="absolute top-6 left-1/2 transform -translate-x-1/2">
                              <div className="w-16 h-8 bg-red-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-red-600 shadow-lg">
                                1. ì´ë§ˆ
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸ”¥</div>
                                <div className="text-xs text-red-500 font-semibold">í™”(ç«)</div>
                              </div>
                            </div>
                            
                            {/* ëˆˆ ì•„ë˜ (ëª©æœ¨) */}
                            <div className="absolute top-28 left-8">
                              <div className="w-12 h-6 bg-green-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-green-600 shadow-lg">
                                2. ëˆˆ
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸŒ±</div>
                                <div className="text-xs text-green-500 font-semibold">ëª©(æœ¨)</div>
                              </div>
                            </div>
                            
                            <div className="absolute top-28 right-8">
                              <div className="w-12 h-6 bg-green-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-green-600 shadow-lg">
                                2. ëˆˆ
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸŒ±</div>
                                <div className="text-xs text-green-500 font-semibold">ëª©(æœ¨)</div>
                              </div>
                            </div>
                            
                            {/* ëº¨ (í† åœŸ) */}
                            <div className="absolute top-36 left-6">
                              <div className="w-14 h-7 bg-yellow-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-yellow-600 shadow-lg">
                                3. ëº¨
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸŒ</div>
                                <div className="text-xs text-yellow-500 font-semibold">í† (åœŸ)</div>
                              </div>
                            </div>
                            
                            <div className="absolute top-36 right-6">
                              <div className="w-14 h-7 bg-yellow-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-yellow-600 shadow-lg">
                                3. ëº¨
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸŒ</div>
                                <div className="text-xs text-yellow-500 font-semibold">í† (åœŸ)</div>
                              </div>
                            </div>
                            
                            {/* ì¸ì¤‘ (ê¸ˆé‡‘) */}
                            <div className="absolute top-52 left-1/2 transform -translate-x-1/2">
                              <div className="w-16 h-6 bg-gray-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-gray-600 shadow-lg">
                                4. ì¸ì¤‘
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">âš”ï¸</div>
                                <div className="text-xs text-gray-500 font-semibold">ê¸ˆ(é‡‘)</div>
                              </div>
                            </div>
                            
                            {/* í„± (ìˆ˜æ°´) - ì§€(åœ°) */}
                            <div className="absolute bottom-6 left-1/2 transform -translate-x-1/2">
                              <div className="w-16 h-8 bg-blue-500/90 rounded-full flex items-center justify-center text-white text-xs font-bold border-2 border-blue-600 shadow-lg">
                                5. í„±
                              </div>
                              <div className="text-center mt-1">
                                <div className="text-lg">ğŸ’§</div>
                                <div className="text-xs text-blue-500 font-semibold">ìˆ˜(æ°´)</div>
                              </div>
                            </div>
                          </div>
                          
                          {/* ê¸°ë³¸ ê´€ìƒ ë¶„ì„ íƒ€ì´í‹€ */}
                          <div className="text-center mb-6">
                            <div className="inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-full border border-blue-400/30">
                              <span className="text-2xl">ğŸ”®</span>
                              <span className="text-xl font-bold text-blue-300">ê¸°ë³¸ ê´€ìƒ ë¶„ì„</span>
                              <span className="text-2xl">ğŸ”®</span>
                            </div>
                            <p className="text-gray-400 text-sm mt-2">ë™ì–‘ ì² í•™ì˜ ì˜¤í–‰ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ê¸°ë³¸ ê´€ìƒ í•´ì„</p>
                          </div>
                          
                          {/* ë¶„ì„ ì˜ì—­ë³„ ìƒì„¸ ì„¤ëª… */}
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div className="bg-red-500/20 rounded-lg p-4 border border-red-400/30">
                              <div className="flex items-center gap-2 mb-2">
                                <span className="text-lg">ğŸ”¥</span>
                                <span className="font-semibold text-red-400">1. ì´ë§ˆ (í™”ç«) - ì²œ(å¤©)</span>
                              </div>
                              <p className="text-sm text-gray-300">
                                ì •ì‹ ì„¸ê³„ì™€ ì•¼ë§ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—°ì• ì—ì„œì˜ ì´ìƒê³¼ ì •ì‹ ì  ì ‘ê·¼ë²•ì„ ë³´ì—¬ì£¼ë©°, ê¹Šì´ ìˆëŠ” ì‚¬ê³ ì™€ ì—´ì •ì ì¸ ì‚¬ë‘ì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥ì´ ìˆì–´ìš”.
                              </p>
                            </div>
                            
                            <div className="bg-green-500/20 rounded-lg p-4 border border-green-400/30">
                              <div className="flex items-center gap-2 mb-2">
                                <span className="text-lg">ğŸŒ±</span>
                                <span className="font-semibold text-green-400">2. ëˆˆ ì•„ë˜ (ëª©æœ¨)</span>
                              </div>
                              <p className="text-sm text-gray-300">
                                ìƒëª…ë ¥ê³¼ ì‚¬ë‘ì˜ ì—´ì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê´€ê³„ì—ì„œ í•­ìƒ ì„±ì¥í•˜ë ¤ëŠ” ì˜ì§€ì™€ ìƒë™ê°ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì‚¬ë‘ì— ëŒ€í•œ ìƒëª…ë ¥ì´ ë„˜ì³ìš”.
                              </p>
                            </div>
                            
                            <div className="bg-yellow-500/20 rounded-lg p-4 border border-yellow-400/30">
                              <div className="flex items-center gap-2 mb-2">
                                <span className="text-lg">ğŸŒ</span>
                                <span className="font-semibold text-yellow-400">3. ëº¨ (í† åœŸ)</span>
                              </div>
                              <p className="text-sm text-gray-300">
                                ì‚¶ì˜ ê¸°ë°˜ê³¼ ì¡°í™” ëŠ¥ë ¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—°ì• ì—ì„œì˜ ì•ˆì •ì„±ê³¼ í¬ìš©ë ¥ì„ ë³´ì—¬ì£¼ë©°, ëª¨ë“  ê°€ëŠ¥ì„±ì´ í”¼ì–´ë‚˜ëŠ” ëŒ€ì§€ì²˜ëŸ¼ ê· í˜•ê°ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                              </p>
                            </div>
                            
                            <div className="bg-gray-500/20 rounded-lg p-4 border border-gray-400/30">
                              <div className="flex items-center gap-2 mb-2">
                                <span className="text-lg">âš”ï¸</span>
                                <span className="font-semibold text-gray-400">4. ì¸ì¤‘ (ê¸ˆé‡‘)</span>
                              </div>
                              <p className="text-sm text-gray-300">
                                ë‚´ë©´ì˜ ê°•ì¸í•¨ê³¼ ì˜ì§€ë ¥ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—°ì• ì—ì„œì˜ ì˜ì§€ë ¥ê³¼ ìˆ¨ê²¨ì§„ ê°•ì¸í•¨ì„ ë³´ì—¬ì£¼ë©°, ë•…ì† ê¹Šì´ ìˆ¨ê²¨ì§„ ë³´ë¬¼ ê°™ì€ ë‚´ë©´ì˜ í˜ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                              </p>
                            </div>
                          </div>
                          
                          <div className="bg-blue-500/20 rounded-lg p-4 border border-blue-400/30 mt-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-lg">ğŸ’§</span>
                              <span className="font-semibold text-blue-400">5. í„± (ìˆ˜æ°´) - ì§€(åœ°)</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì§€í˜œì™€ ì‚¶ì˜ ì—¬ì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—°ì• ì—ì„œì˜ ì§€í˜œì™€ ì„±ìˆ™í•¨ì„ ë³´ì—¬ì£¼ë©°, ì”ì”íˆ íë¥´ëŠ” ê°•ë¬¼ì²˜ëŸ¼ ì§€ì†ì„±ê³¼ ì„±ìˆ™í•¨ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                            </p>
                          </div>
                                                  </div>
                          
                          {/* êµ¬ì—­ ë¶„ë¦¬ íƒ€ì´í‹€ */}
                          <div className="text-center my-8">
                            <div className="inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full border border-purple-400/30">
                              <span className="text-2xl">ğŸ’•</span>
                              <span className="text-xl font-bold text-purple-300">ì—°ì•  ì„±í–¥ ê´€ìƒ ë¶„ì„</span>
                              <span className="text-2xl">ğŸ’•</span>
                            </div>
                            <p className="text-gray-400 text-sm mt-2">ë™ì–‘ ì² í•™ì˜ ì˜¤í–‰ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì—°ì•  íŠ¹ì„± í•´ì„</p>
                          </div>
                          
                          {/* ì˜¤í–‰ë³„ ìƒì„¸ ë¶„ì„ */}
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸ”¥</span>
                              <span className="font-semibold text-green-300">ì´ë§ˆ (í™”ç«)</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì—°ì• ì—ì„œì˜ ì •ì‹ ì  ì ‘ê·¼ë²•ê³¼ ì´ìƒì„ ì¶”êµ¬í•˜ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê¹Šì´ ìˆëŠ” ì‚¬ê³ ì™€ ì—´ì •ì ì¸ ì‚¬ë‘ì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥ì´ ìˆì–´ìš”.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸŒ±</span>
                              <span className="font-semibold text-green-300">ëˆˆ ì•„ë˜ (ëª©æœ¨)</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì‚¬ë‘ì— ëŒ€í•œ ìƒëª…ë ¥ê³¼ ì—´ì •ì´ ë„˜ì¹˜ëŠ” ê²ƒì„ ë§í•´ì¤ë‹ˆë‹¤. ìƒˆë¡œìš´ ê´€ê³„ì—ì„œ í•­ìƒ ì„±ì¥í•˜ë ¤ëŠ” ì˜ì§€ì™€ ìƒë™ê°ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸŒ</span>
                              <span className="font-semibold text-green-300">ëº¨ (í† åœŸ)</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì—°ì• ì—ì„œì˜ ì•ˆì •ì„±ê³¼ ì¡°í™” ëŠ¥ë ¥ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ëª¨ë“  ê°€ëŠ¥ì„±ì´ í”¼ì–´ë‚˜ëŠ” ëŒ€ì§€ì²˜ëŸ¼ í¬ìš©ë ¥ê³¼ ê· í˜•ê°ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">âš”ï¸</span>
                              <span className="font-semibold text-green-300">ì¸ì¤‘ (ê¸ˆé‡‘)</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì—°ì• ì—ì„œì˜ ì˜ì§€ë ¥ê³¼ ìˆ¨ê²¨ì§„ ê°•ì¸í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë•…ì† ê¹Šì´ ìˆ¨ê²¨ì§„ ë³´ë¬¼ì²˜ëŸ¼ ë‚´ë©´ì˜ ê°•ì¸í•¨ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                            </p>
                          </div>
                        </div>
                        
                        <div className="bg-white/10 rounded-lg p-4 mt-4">
                          <div className="flex items-center gap-2 mb-2">
                            <span className="text-2xl">ğŸ’§</span>
                            <span className="font-semibold text-green-300">í„± (ìˆ˜æ°´)</span>
                          </div>
                          <p className="text-sm text-gray-300">
                            ì—°ì• ì—ì„œì˜ ì§€í˜œì™€ ì„±ìˆ™í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì”ì”íˆ íë¥´ëŠ” ê°•ë¬¼ì²˜ëŸ¼ ì§€ì†ì„±ê³¼ ì„±ìˆ™í•¨ì„ ê°€ì§€ê³  ìˆì–´ìš”.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* ì‚¬ì£¼ í•´ì„ - ì‹œê°ì  ë¶„ì„ */}
                  <div className="bg-gradient-to-r from-blue-500/20 to-indigo-500/20 rounded-2xl p-8 border border-blue-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">ğŸ”®</div>
                      <div>
                        <h3 className="text-xl font-semibold text-blue-300 mb-3">ë‹¹ì‹ ì˜ ì‚¬ì£¼ê°€ ë“¤ë ¤ì£¼ëŠ” ì´ì•¼ê¸°</h3>
                        <p className="text-gray-200 leading-relaxed text-lg mb-6">
                          {sajuResults.find(r => r.description)?.description || 
                           `ì‚¬ì£¼ë¥¼ ë³´ë‹ˆ, ë‹¹ì‹ ì€ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ëŠ” ì„±í–¥ì„ íƒ€ê³  íƒœì–´ë‚˜ì…¨ì–´ìš”.`}
                        </p>
                        
                        {/* ì‚¬ì£¼ ì˜¤í–‰ ë¶„ì„ */}
                        <div className="bg-white/10 rounded-2xl p-6 mb-6">
                          <div className="text-center mb-4">
                            <div className="text-2xl font-bold text-blue-300 mb-2">ì‚¬ì£¼ ì˜¤í–‰ ë¶„ì„</div>
                            <div className="text-sm text-gray-300">ë‹¹ì‹ ì˜ ì—°ì•  ì„±í–¥ì„ ì˜¤í–‰ìœ¼ë¡œ ë¶„ì„í•´ë³´ì•˜ì–´ìš”</div>
                          </div>
                          
                          {/* ì˜¤í–‰ ë¹„ìœ¨ ì‹œê°í™” */}
                          <div className="mb-6">
                            <div className="flex items-center justify-between mb-2">
                              <span className="text-sm text-gray-300">ì˜¤í–‰ ë¹„ìœ¨</span>
                              <span className="text-xs text-gray-400">ì´ 100%</span>
                            </div>
                            <div className="space-y-3">
                              {/* í™”(ç«) - ì—´ì •, í™œë ¥ */}
                              <div className="flex items-center gap-3">
                                <div className="w-16 text-center">
                                  <div className="text-2xl mb-1">ğŸ”¥</div>
                                  <div className="text-xs font-semibold text-red-400">í™”(ç«)</div>
                                </div>
                                <div className="flex-1">
                                  <div className="flex justify-between text-xs text-gray-400 mb-1">
                                    <span>ì—´ì •, í™œë ¥</span>
                                    <span>25%</span>
                                  </div>
                                  <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div className="bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full" style={{width: '25%'}}></div>
                                  </div>
                                </div>
                              </div>
                              
                              {/* ëª©(æœ¨) - ì„±ì¥, í™•ì¥ */}
                              <div className="flex items-center gap-3">
                                <div className="w-16 text-center">
                                  <div className="text-2xl mb-1">ğŸŒ±</div>
                                  <div className="text-xs font-semibold text-green-400">ëª©(æœ¨)</div>
                                </div>
                                <div className="flex-1">
                                  <div className="flex justify-between text-xs text-gray-400 mb-1">
                                    <span>ì„±ì¥, í™•ì¥</span>
                                    <span>30%</span>
                                  </div>
                                  <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div className="bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full" style={{width: '30%'}}></div>
                                  </div>
                                </div>
                              </div>
                              
                              {/* í† (åœŸ) - ì•ˆì •, ì¡°í™” */}
                              <div className="flex items-center gap-3">
                                <div className="w-16 text-center">
                                  <div className="text-2xl mb-1">ğŸŒ</div>
                                  <div className="text-xs font-semibold text-yellow-400">í† (åœŸ)</div>
                                </div>
                                <div className="flex-1">
                                  <div className="flex justify-between text-xs text-gray-400 mb-1">
                                    <span>ì•ˆì •, ì¡°í™”</span>
                                    <span>20%</span>
                                  </div>
                                  <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div className="bg-gradient-to-r from-yellow-500 to-amber-500 h-2 rounded-full" style={{width: '20%'}}></div>
                                  </div>
                                </div>
                              </div>
                              
                              {/* ê¸ˆ(é‡‘) - ì˜ì§€, ê²°ë‹¨ */}
                              <div className="flex items-center gap-3">
                                <div className="w-16 text-center">
                                  <div className="text-2xl mb-1">âš”ï¸</div>
                                  <div className="text-xs font-semibold text-gray-400">ê¸ˆ(é‡‘)</div>
                                </div>
                                <div className="flex-1">
                                  <div className="flex justify-between text-xs text-gray-400 mb-1">
                                    <span>ì˜ì§€, ê²°ë‹¨</span>
                                    <span>15%</span>
                                  </div>
                                  <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div className="bg-gradient-to-r from-gray-500 to-slate-500 h-2 rounded-full" style={{width: '15%'}}></div>
                                  </div>
                                </div>
                              </div>
                              
                              {/* ìˆ˜(æ°´) - ì§€í˜œ, ìœ ì—° */}
                              <div className="flex items-center gap-3">
                                <div className="w-16 text-center">
                                  <div className="text-2xl mb-1">ğŸ’§</div>
                                  <div className="text-xs font-semibold text-blue-400">ìˆ˜(æ°´)</div>
                                </div>
                                <div className="flex-1">
                                  <div className="flex justify-between text-xs text-gray-400 mb-1">
                                    <span>ì§€í˜œ, ìœ ì—°</span>
                                    <span>10%</span>
                                  </div>
                                  <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div className="bg-gradient-to-r from-blue-500 to-cyan-500 h-2 rounded-full" style={{width: '10%'}}></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          

                        </div>
                        
                        {/* ë‚˜ì˜ ì—°ì•  ì„±í–¥ ë¶„ì„ */}
                        <div className="bg-gradient-to-r from-blue-500/20 to-cyan-500/20 rounded-2xl p-6 mb-6 border border-blue-400/30">
                          <div className="text-center mb-6">
                            <div className="text-2xl font-bold text-blue-300 mb-2">ğŸŒŸ ë‚˜ì˜ ì—°ì•  ì„±í–¥ ë¶„ì„</div>
                            <div className="text-sm text-gray-300">ë‹¹ì‹ ì˜ ì—°ì•  ìŠ¤íƒ€ì¼ê³¼ ì„±í–¥ì„ ë¶„ì„í–ˆì–´ìš”</div>
                          </div>
                          
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸ’</span>
                              <span className="font-semibold text-blue-300">ê°ì • í‘œí˜„</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ì—°ì• ì—ì„œ ì£¼ë„ì ìœ¼ë¡œ ì´ëŒì–´ê°€ëŠ” ìŠ¤íƒ€ì¼ì€ ì•„ë‹ˆì§€ë§Œ, ìƒëŒ€ë°©ì˜ ê°ì •ì— ê¹Šì´ ê³µê°í•˜ê³  í•¨ê»˜ ì„±ì¥í•˜ë ¤ëŠ” ë§ˆìŒì´ ê°•í•©ë‹ˆë‹¤.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸš€</span>
                              <span className="font-semibold text-blue-300">ìƒˆë¡œìš´ ê²½í—˜</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ìƒˆë¡œìš´ ê²½í—˜ì„ ì¶”êµ¬í•˜ëŠ” ì„±ê²©ì´ë¼ ì—°ì• ì—ì„œë„ í•­ìƒ ìƒˆë¡œìš´ ì‹œë„ì™€ ë„ì „ì„ ì¦ê¸°ì‹œëŠ” ë¶„ì´ì—ìš”.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸ¤</span>
                              <span className="font-semibold text-blue-300">ê³µê° ëŠ¥ë ¥</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              ìƒëŒ€ë°©ì˜ ê°ì •ì„ ê¹Šì´ ì´í•´í•˜ê³  ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜, ê¹Šì´ ìˆëŠ” ê´€ê³„ë¥¼ í˜•ì„±í•  ìˆ˜ ìˆì–´ìš”.
                            </p>
                          </div>
                          
                          <div className="bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-2">
                              <span className="text-2xl">ğŸŒ±</span>
                              <span className="font-semibold text-blue-300">ì„±ì¥ ì§€í–¥</span>
                            </div>
                            <p className="text-sm text-gray-300">
                              í•¨ê»˜ ì„±ì¥í•˜ë ¤ëŠ” ë§ˆìŒì´ ê°•í•´ íŒŒíŠ¸ë„ˆì™€ì˜ ê´€ê³„ë¥¼ í†µí•´ ì„œë¡œ ë°œì „í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ë§Œë“¤ì–´ìš”.
                            </p>
                          </div>
                        </div>
                        
                        {/* ìƒëŒ€ì— ëŒ€í•œ ë¶„ì„ */}
                        <div className="bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-2xl p-6 mb-6 border border-pink-400/30">
                          <div className="text-center mb-6">
                            <div className="text-2xl font-bold text-pink-300 mb-2">ğŸ’• ìƒëŒ€ì— ëŒ€í•œ ë¶„ì„</div>
                            <div className="text-sm text-gray-300">ë‹¹ì‹ ê³¼ ê°€ì¥ ì˜ ë§ëŠ” íŒŒíŠ¸ë„ˆì˜ íŠ¹ì§•ì„ ì˜¤í–‰ ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„í–ˆì–´ìš”</div>
                          </div>
                          
                          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {/* ë³´ì™„ì  ì˜¤í–‰ */}
                            <div className="bg-white/10 rounded-lg p-4">
                              <div className="flex items-center gap-2 mb-3">
                                <span className="text-xl">âš–ï¸</span>
                                <span className="font-semibold text-pink-300">ë³´ì™„ì  ì˜¤í–‰</span>
                              </div>
                              <div className="space-y-2">
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">í† (åœŸ) ì„±í–¥ì´ ê°•í•œ ì‚¬ëŒ</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">ì•ˆì •ê°ê³¼ ê· í˜•ê°ì„ ì œê³µ</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">ë‹¹ì‹ ì˜ ì—´ì •ì„ ì§€ì§€í•´ì£¼ëŠ” íƒ€ì…</span>
                                </div>
                              </div>
                            </div>
                            
                            {/* ì‹œë„ˆì§€ ì˜¤í–‰ */}
                            <div className="bg-white/10 rounded-lg p-4">
                              <div className="flex items-center gap-2 mb-3">
                                <span className="text-xl">ğŸš€</span>
                                <span className="font-semibold text-purple-300">ì‹œë„ˆì§€ ì˜¤í–‰</span>
                              </div>
                              <div className="space-y-2">
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">ìˆ˜(æ°´) ì„±í–¥ì´ ê°•í•œ ì‚¬ëŒ</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">ì§€í˜œì™€ ìœ ì—°ì„±ìœ¼ë¡œ ì¡°í™”</span>
                                </div>
                                <div className="flex items-center gap-2">
                                  <span className="text-sm text-gray-300">â€¢</span>
                                  <span className="text-sm text-gray-300">í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆ</span>
                                </div>
                              </div>
                            </div>
                          </div>
                          
                          {/* ì´ìƒí˜• ìƒì„¸ ì„¤ëª… */}
                          <div className="mt-6 bg-white/10 rounded-lg p-4">
                            <div className="flex items-center gap-2 mb-3">
                              <span className="text-xl">ğŸ¯</span>
                              <span className="font-semibold text-pink-300">ì´ìƒí˜• ìƒì„¸ ì„¤ëª…</span>
                            </div>
                            <p className="text-sm text-gray-300 leading-relaxed">
                              ë‹¹ì‹ ì€ ëª©(æœ¨)ê³¼ í™”(ç«) ì„±í–¥ì´ ê°•í•´ ì—´ì •ì ì´ê³  ì„±ì¥ ì§€í–¥ì ì¸ ì„±ê²©ì„ ê°€ì§€ê³  ìˆì–´ìš”. 
                              ë”°ë¼ì„œ ì•ˆì •ê°ê³¼ ê· í˜•ê°ì„ ì œê³µí•´ì£¼ëŠ” í† (åœŸ) ì„±í–¥ì˜ íŒŒíŠ¸ë„ˆì™€ ë§Œë‚˜ë©´ ì„œë¡œë¥¼ ë³´ì™„í•˜ë©° 
                              ì•ˆì •ì ì¸ ê´€ê³„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”. ë˜í•œ ì§€í˜œì™€ ìœ ì—°ì„±ì„ ê°€ì§„ ìˆ˜(æ°´) ì„±í–¥ì˜ ì‚¬ëŒê³¼ëŠ” 
                              í•¨ê»˜ ë°°ìš°ê³  ì„±ì¥í•  ìˆ˜ ìˆëŠ” ì‹œë„ˆì§€ë¥¼ ë‚¼ ìˆ˜ ìˆì–´ìš”.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* ê¶í•© í•´ì„ */}
                  <div className="bg-gradient-to-r from-purple-500/20 to-violet-500/20 rounded-2xl p-8 border border-purple-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">ğŸ’«</div>
                      <div>
                        <h3 className="text-xl font-semibold text-purple-300 mb-3">ë‹¹ì‹ ê³¼ ìƒëŒ€ë°©ì´ ë§Œë‚  ë•Œ</h3>
                        <p className="text-gray-200 leading-relaxed text-lg">
                          {sajuResults.find(r => r.keyword.includes("ê¶í•©") || r.keyword.includes("ì‹œë„ˆì§€"))?.description || 
                           `ë‹¹ì‹ ê³¼ ìƒëŒ€ë°©ì´ ë§Œë‚¬ì„ ë•ŒëŠ” ë”°ëœ»í•˜ê³  ì•ˆì •ì ì¸ ë¶„ìœ„ê¸°ê°€ ë§Œë“¤ì–´ì§ˆ ê±°ì˜ˆìš”. ê°ì •ì  êµê°ê³¼ ì§€ì  ì„±ì¥ì„ ì¤‘ì‹œí•˜ëŠ” íŒŒíŠ¸ë„ˆì™€ ë§Œë‚˜ë©´ ì‹œë„ˆì§€ë¥¼ ë‚¼ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. í•¨ê»˜ ë°°ìš°ê³  ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê´€ê³„ë¥¼ ì¶”êµ¬í•˜ëŠ” ë¶„ê³¼ ë§Œë‚˜ë©´ ë”ìš± ê¹Šì´ ìˆëŠ” ì‚¬ë‘ì„ ê²½í—˜í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.`}
                        </p>
                      </div>
                    </div>
                  </div>

                  {/* ì´ìƒí˜• ì œì•ˆ */}
                  <div className="bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-2xl p-8 border border-yellow-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">ğŸŒˆ</div>
                      <div>
                        <h3 className="text-xl font-semibold text-yellow-300 mb-3">ë‹¹ì‹ ì˜ ì§„ì •í•œ ì´ìƒí˜•</h3>
                        <p className="text-gray-200 leading-relaxed text-lg">
                          {sajuResults.find(r => r.keyword.includes("ì´ìƒí˜•") || r.keyword.includes("íŒŒíŠ¸ë„ˆ"))?.description || 
                           `ë‹¹ì‹ ê³¼ ê°€ì¥ ì˜ ë§ëŠ” ì‚¬ëŒì€ ë‹¹ì‹ ì˜ ë”°ëœ»í•¨ì„ ì§„ì‹¬ìœ¼ë¡œ ì´í•´í•˜ê³  í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì˜ˆìš”. ê°ì •ì  êµê°ê³¼ ì§€ì  ëŒ€í™”ë¥¼ ì¤‘ì‹œí•˜ë©°, ì„œë¡œì˜ ê¿ˆê³¼ ëª©í‘œë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒê³¼ ë§Œë‚˜ë©´ ìš´ëª…ì ì¸ ì‚¬ë‘ì„ ê²½í—˜í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”. íŠ¹íˆ ë‹¹ì‹ ì˜ ê³µê° ëŠ¥ë ¥ì„ ì§„ê°€ë¡œ ì•Œì•„ì£¼ê³ , í•¨ê»˜ ìƒˆë¡œìš´ ëª¨í—˜ì„ ë– ë‚  ì¤€ë¹„ê°€ ëœ ì‚¬ëŒì´ ì´ìƒì ì…ë‹ˆë‹¤.`}
                        </p>
                      </div>
                    </div>
                  </div>

                  {/* ì—°ì•  í‚¤ì›Œë“œ */}
                  <div className="bg-gradient-to-r from-amber-500/20 to-yellow-500/20 rounded-2xl p-8 border border-amber-400/30">
                    <div className="flex items-start gap-4 mb-6">
                      <div className="text-3xl">ğŸ·ï¸</div>
                      <div className="flex-1">
                        <h3 className="text-xl font-semibold text-amber-300 mb-3">ë‹¹ì‹ ì˜ ì—°ì•  í‚¤ì›Œë“œ</h3>
                        <div className="flex flex-wrap gap-3">
                          {[...(faceReadingResults.slice(0, 3).map(r => `#${r.keyword}`)), ...(sajuResults.slice(0, 2).map(r => `#${r.keyword}`))].map((keyword, index) => (
                            <span key={index} className="bg-amber-500/30 text-amber-200 px-4 py-2 rounded-full text-sm font-medium border border-amber-400/50 hover:bg-amber-500/40 transition-colors">
                              {keyword}
                            </span>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              ) : (
                <div className="space-y-6">
                  <div className="bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-2xl p-8 border border-pink-400/30">
                    <div className="flex items-start gap-4">
                      <div className="text-3xl">âœ¨</div>
                      <div>
                        <h3 className="text-xl font-semibold text-pink-300 mb-3">ë‹¹ì‹ ì˜ ì—°ì•  ì´ì•¼ê¸°</h3>
                        <p className="text-gray-200 leading-relaxed text-lg">
                          {`${profileData.nickname || "ë‹¹ì‹ "}ë‹˜ì˜ ì–¼êµ´ì„ ë³´ëŠ” ìˆœê°„, ë§ˆì¹˜ ë”°ëœ»í•œ ë´„ë‚  í–‡ì‚´ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  í¬ê·¼í•œ ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤. ë‹¹ì‹ ì€ ì‚¬ë‘ì„ í•  ë•Œ ë§ˆìŒì„ ì™„ì „íˆ ì—´ê³ , ìƒëŒ€ë°©ì˜ ê°ì •ì— ê¹Šì´ ê³µê°í•˜ëŠ” íƒ€ì…ì´ì—ìš”.`}
                        </p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="bg-gradient-to-r from-blue-500/20 to-indigo-500/20 rounded-2xl p-8 border border-blue-400/30">
                    <div className="flex items-start gap-4">
                      <div className="text-3xl">ğŸ”®</div>
                      <div>
                        <h3 className="text-xl font-semibold text-blue-300 mb-3">ë‹¹ì‹ ì˜ ì‚¬ì£¼ê°€ ë“¤ë ¤ì£¼ëŠ” ì´ì•¼ê¸°</h3>
                        <p className="text-gray-200 leading-relaxed text-lg">
                          ì‚¬ì£¼ë¥¼ ë³´ë‹ˆ, ë‹¹ì‹ ì€ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ëŠ” ì„±í–¥ì„ íƒ€ê³  íƒœì–´ë‚˜ì…¨ì–´ìš”. ì—°ì• ì—ì„œ ì£¼ë„ì ìœ¼ë¡œ ì´ëŒì–´ê°€ëŠ” ìŠ¤íƒ€ì¼ì€ ì•„ë‹ˆì§€ë§Œ, ìƒëŒ€ë°©ì˜ ê°ì •ì— ê¹Šì´ ê³µê°í•˜ê³  í•¨ê»˜ ì„±ì¥í•˜ë ¤ëŠ” ë§ˆìŒì´ ê°•í•©ë‹ˆë‹¤.
                        </p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-2xl p-8 border border-yellow-400/30">
                    <div className="flex items-start gap-4">
                      <div className="text-3xl">ğŸŒˆ</div>
                      <div>
                        <h3 className="text-xl font-semibold text-yellow-300 mb-3">ë‹¹ì‹ ì˜ ì§„ì •í•œ ì´ìƒí˜•</h3>
                        <p className="text-gray-200 leading-relaxed text-lg">
                          ë‹¹ì‹ ê³¼ ê°€ì¥ ì˜ ë§ëŠ” ì‚¬ëŒì€ ë‹¹ì‹ ì˜ ë”°ëœ»í•¨ì„ ì§„ì‹¬ìœ¼ë¡œ ì´í•´í•˜ê³  í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì˜ˆìš”. ê°ì •ì  êµê°ê³¼ ì§€ì  ëŒ€í™”ë¥¼ ì¤‘ì‹œí•˜ë©°, ì„œë¡œì˜ ê¿ˆê³¼ ëª©í‘œë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒê³¼ ë§Œë‚˜ë©´ ìš´ëª…ì ì¸ ì‚¬ë‘ì„ ê²½í—˜í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>

          {/* í•˜ë‹¨ CTA ë²„íŠ¼ */}
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button
              onClick={() => alert("ë¦¬í¬íŠ¸ ì €ì¥ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!")}
              className="bg-white/20 hover:bg-white/30 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors border border-white/30"
            >
              ë¦¬í¬íŠ¸ ì €ì¥í•˜ê¸°
            </button>
            <button
              onClick={() => setCurrentStep("profile")}
              className="bg-amber-400 hover:bg-amber-500 text-black px-8 py-4 rounded-full text-lg font-bold transition-colors"
            >
              ì´ìƒí˜• ì°¾ìœ¼ëŸ¬ ê°€ê¸°
            </button>
          </div>
        </div>
      </div>
    )
  }

  // ì‹¤ì œ ë§¤ì¹­ í˜ì´ì§€
  if (currentStep === "ideal-match") {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white p-6 overflow-y-auto">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-4xl font-bold text-amber-400 mb-8 text-center">ğŸ’• ì´ìƒí˜• ë§¤ì¹­</h1>
          <p className="text-xl text-white mb-8 text-center">AIê°€ ë‹¹ì‹ ê³¼ ì˜ ë§ëŠ” ì‚¬ëŒë“¤ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!</p>
          
          {/* ë§¤ì¹­ ê²°ê³¼ í‘œì‹œ */}
          <div className="space-y-6">
            {dummyMatches.map((match, index) => (
              <div key={index} className="bg-white/10 rounded-2xl p-6 border border-white/20">
                <div className="flex flex-col md:flex-row gap-6">
                  {/* í”„ë¡œí•„ ì‚¬ì§„ */}
                  <div className="flex-shrink-0">
                    <div className="w-32 h-32 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-4xl">
                      ğŸ‘¤
                    </div>
                  </div>
                  
                  {/* í”„ë¡œí•„ ì •ë³´ */}
                  <div className="flex-1">
                    <div className="flex items-center gap-4 mb-4">
                      <h3 className="text-2xl font-bold text-amber-400">{match.name}</h3>
                      <span className="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                        {match.totalCompatibility}% ê¶í•©
                      </span>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                      <div>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ë‚˜ì´:</span> {match.age}ì„¸</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ì§ì—…:</span> {match.job}</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">ì§€ì—­:</span> {match.region}</p>
                      </div>
                      <div>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">í‚¤:</span> {match.height}</p>
                        <p className="text-white mb-1"><span className="text-amber-400 font-semibold">í•™ë ¥:</span> {match.education}</p>
                      </div>
                    </div>
                    
                    <p className="text-gray-300 mb-4">{match.introduction}</p>
                    
                    {/* ê¶í•© ë¶„ì„ */}
                    <div className="grid grid-cols-2 gap-4 mb-4">
                      <div className="bg-green-500/20 rounded-lg p-3">
                        <p className="text-green-400 font-semibold mb-1">ê´€ìƒ ê¶í•©</p>
                        <p className="text-white text-sm">{match.faceAnalysis}</p>
                      </div>
                      <div className="bg-blue-500/20 rounded-lg p-3">
                        <p className="text-blue-400 font-semibold mb-1">ì‚¬ì£¼ ê¶í•©</p>
                        <p className="text-white text-sm">{match.sajuAnalysis}</p>
                      </div>
                    </div>
                    
                    {/* í‚¤ì›Œë“œ */}
                    <div className="flex flex-wrap gap-2 mb-4">
                      {match.keywords.map((keyword, idx) => (
                        <span key={idx} className="bg-amber-400/20 text-amber-400 px-2 py-1 rounded-full text-xs border border-amber-400">
                          {keyword}
                        </span>
                      ))}
                    </div>
                  </div>
                </div>
                
                {/* ì•¡ì…˜ ë²„íŠ¼ */}
                <div className="flex flex-col sm:flex-row gap-3 mt-6">
                  <button
                    onClick={() => {
                      setSelectedUser(match)
                      setCurrentStep("other-profile")
                    }}
                    className="flex-1 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full font-bold transition-colors border border-white/30"
                  >
                    í”„ë¡œí•„ ìì„¸íˆ ë³´ê¸°
                  </button>
                  <button
                    onClick={() => {
                      setSelectedUser(match)
                      initializeChatMessages(match.name)
                      setCurrentStep("dm-chat")
                    }}
                    className="flex-1 bg-amber-400 hover:bg-amber-500 text-black px-6 py-3 rounded-full font-bold transition-colors"
                  >
                    ğŸ’¬ ë©”ì‹œì§€ ë³´ë‚´ê¸°
                  </button>
                </div>
              </div>
            ))}
          </div>
          
          {/* í•˜ë‹¨ ë²„íŠ¼ */}
          <div className="flex flex-col sm:flex-row gap-4 justify-center mt-8">
            <button
              onClick={() => setCurrentStep("onboarding")}
              className="bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-full font-bold transition-colors border border-white/30"
            >
              ì²˜ìŒìœ¼ë¡œ
            </button>
            <button
              onClick={() => alert("ë” ë§ì€ ë§¤ì¹­ ê²°ê³¼ë¥¼ ë³´ë ¤ë©´ í”„ë¦¬ë¯¸ì—„ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”!")}
              className="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-8 py-4 rounded-full text-lg font-bold transition-colors"
            >
              ë” ë§ì€ ë§¤ì¹­ ë³´ê¸°
            </button>
          </div>
        </div>
      </div>
    )
  }



  return (
    <div className="min-h-screen bg-gray-900 text-white flex items-center justify-center">
      <h1>ê´€ìƒì€ ê³¼í•™ì´ë‹¤</h1>
    </div>
  )
}

export default function FaceReadingApp() {
  return (
    <Suspense fallback={
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-16 w-16 border-b-2 border-amber-400 mx-auto mb-4"></div>
          <p className="text-xl">ë¡œë”© ì¤‘...</p>
        </div>
      </div>
    }>
      <FaceReadingAppContent />
    </Suspense>
  )
}
